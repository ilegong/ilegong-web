<style>
    .steps {
        height: 46px;
        border-bottom: 2px solid #e6e6e6;
        position: relative;
    }

    ol {
        display: block;
        list-style-type: decimal;
        -webkit-margin-before: 1em;
        -webkit-margin-after: 1em;
        -webkit-margin-start: 0px;
        -webkit-margin-end: 0px;
        -webkit-padding-start: 40px;
    }
    .steps ol li {
        display: inline;
        float: left;
        width: 170px;
        padding-left: 70px;
        height: 46px;
        line-height: 46px;
        font-size: 16px;
        font-weight: bold;
        color: #999;
        font-family: "\5FAE\8F6F\96C5\9ED1","\534E\6587\7EC6\9ED1","\9ED1\4F53",arial;
    }
    .steps ol li.active {
        color: #3e3e3e;
        border-bottom: 2px solid #ff4700;
    }
    .steps ol li i {
        display: inline-block;
        zoom: 1;
        margin-right: 5px;
        width: 24px;
        height: 24px;
        text-align: center;
        font-style: normal;
        line-height: 24px;
        font-size: 14px;
        font-weight: bold;
        color: #999;

    }
    .steps-3 ol li{
        width: 300px;
        padding-left: 60px;
    }
    .steps ol li.active i {
        color: #ff4700;
    }
    .form-item {
        padding: 10px 0 10px 370px;
        line-height: 36px;
        zoom: 1;
    }
    .form-item .form-label {
        display: inline;
        float: left;
        margin-left: -200px;
        width: 200px;
        height: 37px;
        line-height: 37px;
        text-align: right;
    }
    .form-item .form-control{
        width: 230px;
        display: inline;
    }
    .help-inline {
        margin-top: 5px;
        margin-bottom: 10px;
        color: #b94a48;
    }
</style>
<div class="steps steps-3">
    <ol>
        <li class="active"><i>1</i><span class="tsl" data-phase-id="r_p_createAccount">创建店铺</span></li>
        <li><i>2</i><span class="tsl" data-phase-id="r_p_fillUserInfo">认证店铺</span></li>
        <li><i>3</i><span class="tsl" data-phase-id="r_p_regSuc">完成</span></li>
    </ol>
</div>
<div class="applyBox ">
    <form action="/openstores/apply" method="post" id="J_ApplyForm"><input type="hidden" name="ua" id="UA_InputId" >
        <div class="form-group">
            <div class="form-item">
                <span class="form-label">联系人姓名： </span>
                <input class="form-control" name="data[Openstore][link_name]" id="person_name" type="text" value="" placeholder="请填写完整的真实姓名" >
            </div>
            <div class="form-item">
                <span class="form-label">联系人手机号： </span>
                <input class="form-control" name="data[Openstore][mobile]" id="mobile_number" type="text" value="" placeholder="我们会在第一时间联系你" >
            </div>
            <div class="form-item form-item-checkcode">
                <span class="form-label tsl" >验证码： </span>
                <input id="J_CheckCodeInput" class="form-control" style="display: inline; width: 110px" type="text"  value="" placeholder= "点击图片刷新">
                {{$this->Html->image(array('controller' => 'Check','action'=>'captcha'), array('id'=> "image_code", 'alt' => "看不清楚，换一张"))}}
                <div id = "checkInfo"></div>
            </div>
            <div class="form-item form-item-messagecode">
                <span class="form-label tsl">短信验证码： </span>
                <input id="message_input" class="form-control" style="display: inline; width: 82px" name="data[Openstore][msg_code]" type="text" data-outer_placeholder="">
                <input type="button" id="btnMobileCode" value="获取" />
                <span id = "sendInfo"></span>
            </div>
            <div class="form-item">
                <span class="form-label">联系人QQ： </span>
                <input class="form-control" name="data[Openstore][qq]" id="qq_number" type="text" value="" >
            </div>
        </div>
        <div class="form-group">
            <div class="form-item">
                <input class="form-checkbox" type="checkbox" name="" id="J_Agreement" checked="checked">

                <label for="J_Agreement" class="f12 tsl" data-phase-id="agreementTip">
                    同意<a href="http://www.taobao.com/go/chn/member/agreement.php" target="_blank">《朋友说服务协议》</a>
                </label>

            </div>
            <div class="form-item form-item-short">
                <button  class="btn btn-warning" type="submit" id="btnStoreCreate">创建店铺</button>
            </div>

        </div>
    </form>
</div>

{{$this->Html->script(array(
'jquery.validate.min.js',
));
}}
<script>

    //        function createCode(){
    //            var b = $("#mobile_number").val();
    //            var f = "/stores/create_code";
    //            jQuery.ajax({type: "POST",dataType: "json",url: f,data: "phoneNumbers=" + b,cache: !1,success: function(a) {
    //                var d = a;
    //javascript:alert('您点到我了');
    //            }})
    //        }
    $().ready(function(){
        //刷新验证码
        $('#image_code').click(function(){
            document.getElementById('image_code').src = '/check/captcha.html?'+Math.random()*10000;
        });
        //获取手机验证码，显示提示信息
        $('#btnMobileCode').click(function() {
            var phone_num = $("#mobile_number").val();
            var key_str = $("#J_CheckCodeInput").val();
            $("#sendInfo").html("");
            $("#checkInfo").html("");
            var f = "/check/message_code";
            jQuery.ajax({type: "POST",dataType: "json",url: f,data: {phoneNumbers: phone_num, keyString: key_str},cache: !1,success: function(a) {
                if(a.error == 0){
                    $("#sendInfo").html("验证短信已发出，请注意接收");
                }else if(a.check_error == 1){
                    $("#checkInfo").html("验证码错误，请重新输入").addClass('help-inline ');
                }

            }});
            var count = 30;
            var countdown = setInterval(CountDown, 1000);

            function CountDown() {
                $("#btnMobileCode").attr("disabled", true);
                $("#btnMobileCode").val( count + " 秒后重新获取!");
                if (count == 0) {
                    $("#btnMobileCode").val("获取").removeAttr("disabled");
                    clearInterval(countdown);
                }
                count--;
            }
        });
        //添加自定义验证规则
        jQuery.validator.addMethod("isPhone", function (value, element) {
            return (value.length == 11 && /^(\d+){11}$/.test(value)) ;
        }, "");
        $("#J_ApplyForm").validate({
            //规则制定根据字段的id属性
            rules: {

                person_name: 'required',
                mobile_number: {required: true, isPhone: true},
                message_input: 'required',
                qq_number: {required: true, number: true}
            },
            messages: {

                person_name: {required: "请输入您的真实姓名"},
                message_input: {required: "请输入您的手机验证码"},
                mobile_number: {required: "请输入手机号码", isPhone: "手机号码格式不正确"},
                qq_number: {required: "请输入您的qq号", number: "QQ号码格式不正确"},
            },
            errorPlacement: function(error, element) {
                error.appendTo(element.parent());
            },
            errorClass: "help-inline",
            highlight : function(element) {
                $(element).closest('.form-item').addClass('has-error');
            },
            /* 验证通过时的处理 */
            success : function(label) {
                label.closest('.form-item').removeClass('has-error');
                label.remove();
            }
        });
        //添加复选框的js事件
        $("#J_Agreement").click(function(){
            if($("#J_Agreement").prop("checked") == true){
                $("#btnStoreCreate").val("创建店铺").removeAttr("disabled");
            }else{
                $("#btnStoreCreate").attr("disabled", true);
                alert("创建店铺需要同意《朋友说服务协议》");
            }
        })
    });
</script>