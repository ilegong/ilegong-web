{{$this->Html->css(array(
'jquery-ui.css',
))}}
<div class="Share_Offer container">
    <style>
        body {
            overflow-x: hidden;
        }
        h2,small{
            text-align: center;
        }

    </style>
<h2><span class="title">发红包</span></h2>
    <small>红包是我们开发的新功能，帮助商家进行病毒时的营销。红包设置生效后，用户支付后会收到一个红包，里面包含我们设定数量的优惠券，用户将红包分享给朋友后，每个朋友从中获得一张数额随机的优惠券，从而刺激用户购买</small>

    <form accept-charset="utf-8"  role="form"  class="form-horizontal" method="post" id="Share_Offer_AddForm" action="{{$this->Html->url('/s/add_share_offers.html')}}">
        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offername" >红包名称</label>
            <div class="col-sm-6 controls">
                <input type="text" value="{{$this->data[ShareOffer][name]}}" class="form-control" id="share_offername" maxlength="100" name="data[ShareOffer][name]">
                <span class="help-block">显示在用户收到的红包和优惠券上，例如“xxx”5元优惠卷</span>

            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offerstart">起始时间</label>
            <div class="col-sm-6 controls">
                <input type="text" value="{{$this->data[ShareOffer][start]}}" class="form-control" id="share_offerstart" maxlength="100" name="data[ShareOffer][start]">
                <p class="help-block">从这个日期开始，用户购买商品后送他红包</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offerend">截至时间</label>
            <div class="col-sm-6 controls">
                <input type="text" value="{{$this->data[ShareOffer][end]}}"  class="form-control" id="share_offerend" maxlength="100" name="data[ShareOffer][end]">
                <p class="help-block">从这个日期过后，用户购买商品后不再送他红包</p>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offervalidays">有效时间</label>
            <div class="col-sm-6 controls">
                <input type="text" value="{{$this->data[ShareOffer][valid_days]}}"  class="form-control" id="share_offervalidays" maxlength="100" name="data[ShareOffer][valid_days]">
                <p class="help-block">单位是天，红包和优惠券发放后的有效期</p>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offeratio_percent">返利比率</label>
            <div class="col-sm-6 controls">
                <input type="text" value="{{$this->data[ShareOffer][ratio_percent]}}"  class="form-control" id="share_offeratio_percent" maxlength="100" name="data[ShareOffer][ratio_percent]">
                <p class="help-block">红包金额＝订单金额＊返利比率,例：返利比例为10，表示10%</p>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offerpublished">是否发布</label>
            <div class="col-sm-6 controls">
              <select id="share_offerpublished" name="data[ShareOffer][published]" class="form-control">
                  <option value="0">否</option>
                  <option value="1">是</option>
              </select>
                <p class="help-block">是否立即发布</p>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offerintroduct">使用说明</label>
            <div class="col-sm-6 controls">
                <textarea id="share_offerintroduct" value="{{$this->data[ShareOffer][introduct]}}"  class="form-control" cols="30" rows="4"  name="data[ShareOffer][introduct]"></textarea>
                <p class="help-block">特殊说明：展示在用户优惠券列表下方，做补充说明用，可以为空</p>
            </div>
        </div>

        <div class="form-group">
            <div class="col-sm-5 controls"><input class="btn btn-primary  pull-right"  type="submit" value="提交"></div>
        </div>

    </form>



</div>




{{$this->Html->script(array(

 'jquery/jquery.min.js',
 'jquery.validate.min.js',
 'jquery-2.1.3.min.js',
 'jquery-ui.js',
 'jquery.iframe-transport.js',
 ));
}}
<script>
    $(document).ready(function(){
        $('#share_offerstart,#share_offerend').datepicker({
            dateFormat : "yy-mm-dd"
        });

        $("#Share_Offer_AddForm").validate({
            rules:{
                share_offername:{required:true},
                share_offerstart:{required:true},
                share_offerend:{required:true},
                share_offervalidays:{required:true},
                share_offeratio_percent:{required:true}
            },
            messages:{
                share_offername:{required:"名称不能为空哦"},
                share_offerstart:{required:"起始时间不能为空哦"},
                share_offerend :{required:"结束时间不能为空哦"},
                share_offervalidays:{required:"有效时间不能为空哦"},
                share_offeratio_percent:{required:"返利比率不能为空哦"}
            },

            errorPlacement:function(error,element){
                error.appendTo(element.parent());
            },
            errorClass: "help-inline",
            highlight: function (element) {
                $(element).closest('.Share_Offer').addClass('has-error');
            },
            /* 验证通过时的处理 */
            success: function (label) {
                /*label.addClass("valid").text("Ok!")*/
                label.closest('.Share_Offer').removeClass('has-error');
                label.remove();
            }
        });
    })
</script>