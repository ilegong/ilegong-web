{{$this->Html->css(array(
'jquery-ui.css',
))}}
<div class="Share_Offer container">
    <style>
        body {
            overflow-x: hidden;
        }

        h2{
            text-align: center;
            display:inline-block;
        }

    </style>
<h2><span class="title">发红包:</span></h2>
    <small>红包是我们开发的新功能，帮助商家进行病毒时的营销。红包设置生效后，用户支付后会收到一个红包，里面包含我们设定数量的优惠券，用户将红包分享给朋友后，每个朋友从中获得一张数额随机的优惠券，从而刺激用户购买</small>

    <form accept-charset="utf-8"  role="form"  class="form-horizontal" method="post" id="Add_Share_OfferForm" action="{{$this->Html->url('/s/add_share_offers.html')}}">
        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offername" >红包名称</label>
            <div class="col-sm-6 controls">
                <input type="text" value="" class="form-control" id="share_offername" maxlength="100" name="data[ShareOffer][name]">
                <span class="help-block">显示在用户收到的红包和优惠券上，例如“xxx”5元优惠卷,xxx5元红包”</span>

            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offerstart">起始时间</label>
            <div class="col-sm-6 controls">
                <input type="text" value="" class="form-control" id="share_offerstart" maxlength="100" name="data[ShareOffer][start]">
                <p class="help-block">从这个日期开始，用户购买商品后送他红包</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offerend">截止时间</label>
            <div class="col-sm-6 controls">
                <input type="text" value=""  class="form-control" id="share_offerend" maxlength="100" name="data[ShareOffer][end]">
                <p class="help-block">从这个日期过后，用户购买商品后不再送他红包</p>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offervalidays">有效时间</label>
            <div class="col-sm-6 controls">
                <input type="text" value=""  class="form-control" id="share_offervalidays" maxlength="100" name="data[ShareOffer][valid_days]">
                <p class="help-block">单位是天，红包和优惠券发放后的有效期；例：填入‘7’，则红包7天没有分享出去，那么自动失效，优惠券7天内没有使用，也自动失效</p>
            </div>
        </div>



        <!--<div class="form-group">-->
            <!--<label class="col-sm-2 control-label" for="share_offer_num">红包数目</label>-->
            <!--<div class="col-sm-6 controls">-->
                <!--<input type="text" value="{{$this->data[ShareOffer][share_num]}}"  class="form-control" id="share_offer_num" maxlength="100" name="data[ShareOffer][share_num]">-->
                <!--<p class="help-block">设置红包的数量</p>-->
            <!--</div>-->
        <!--</div>-->

        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offer_avg_num">红包平均金额</label>
            <div class="col-sm-6 controls">
                <input type="text" value=""  class="form-control" id="share_offer_avg_number" maxlength="100" name="data[ShareOffer][avg_number]">
                <p class="help-block">设置红包的平均金额（分），例：1.5 元，即150分</p>
            </div>
        </div>

        <!--<div class="form-group">-->
            <!--<label class="col-sm-2 control-label" for="share_offerpublished">是否发布</label>-->
            <!--<div class="col-sm-6 controls">-->
              <!--<select id="share_offerpublished" name="data[ShareOffer][published]" class="form-control">-->
                  <!--<option value="0">否</option>-->
                  <!--<option value="1">是</option>-->
              <!--</select>-->
                <!--<p class="help-block">是否立即发布红包</p>-->
            <!--</div>-->
        <!--</div>-->

        {{if empty($store_offer)}}
        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offeris_default">是否创建默认红包</label>
            <div class="col-sm-6 controls">
                <select id="share_offeris_default" name="data[ShareOffer][is_default]" class="form-control">
                    <option value="0">否</option>
                    <option value="1">是</option>
                </select>
                <p class="help-block">每位商家只能创建一个默认红包，默认红包在用户购买商家商品并付款后会自动发出</p>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offeratio_percent">返利比率</label>
            <div class="col-sm-6 controls">
                <input type="text" value=""  class="form-control" id="share_offeratio_percent" maxlength="100" name="data[ShareOffer][ratio_percent]">
                <p class="help-block">红包金额＝订单金额＊返利比率,例：返利比例为10，表示10%；订单金额为100元，红包就是10元;只针对默认红包</p>
            </div>
        </div>

        {{/if}}

        <div class="form-group">
            <label class="col-sm-2 control-label" for="share_offerintroduct">使用说明</label>
            <div class="col-sm-6 controls">
                <textarea id="share_offerintroduct" value=""  class="form-control" cols="30" rows="4"  name="data[ShareOffer][introduct]"></textarea>
                <p class="help-block">特殊说明：展示在用户优惠券列表下方，做补充说明用，可以为空;例：XXXX年终大促，购买任意商品使用</p>
            </div>
        </div>

        <div class="form-group">
            <div class="col-sm-5 controls"><input class="btn btn-primary  pull-right"  type="submit" value="提交"></div>
        </div>
    </form>
</div>

{{$this->Html->script(array(
 'jquery/jquery.min.js',
 'jquery-2.1.3.min.js',
 'jquery-ui.js',
 'jquery.iframe-transport.js',
 'jquery.validate.min.js',
 ));
}}
<script type="text/javascript">
    $(document).ready(function(){
        $("#share_offerstart,#share_offerend").datepicker({
            dateFormat : "yy-mm-dd"
        });

        $('#Add_Share_OfferForm').validate({
            rules:{
                share_offername:'required',
                share_offerstart:'required',
                share_offerend: 'required',
                share_offervalidays: 'required',
                share_offeratio_percent: 'required',
                share_offer_avg_number: 'required'
            },
            messages:{
                share_offername:{required:'红包名称不能为空哦'},
                share_offerstart:{required:'起始时间不能为空哦'},
                share_offerend:{required:'结束时间不能为空哦'},
                share_offervalidays:{required:'有效时间不能为空哦'},
                share_offeratio_percent:{required:'返利比率不能为空哦'},
                share_offer_avg_number:{required:'红包平均金额不能为空哦'}
            },
            errorPlacement: function(error, element) {
                error.appendTo(element.parent());
            },
            errorClass: "help-inline",
            highlight : function(element) {
                $(element).closest('.Share_Offer').addClass('has-error');
            },
            /* 验证通过时的处理 */
            success : function(label) {
                label.closest('.Share_Offer').removeClass('has-error');
                label.remove();
            }
        });

    });
</script>
