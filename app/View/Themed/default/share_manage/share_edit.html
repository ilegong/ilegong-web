<style>
    .stepwizard-step p {
        margin-top: 10px;
    }

    .stepwizard-row {
        display: table-row;
    }

    .stepwizard {
        display: table;
        width: 100%;
        position: relative;
    }

    .stepwizard-step button[disabled] {
        opacity: 1 !important;
        filter: alpha(opacity=100) !important;
    }

    .stepwizard-row:before {
        top: 14px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 100%;
        height: 1px;
        background-color: #ccc;
        z-order: 0;

    }

    .stepwizard-step {
        display: table-cell;
        text-align: center;
        position: relative;
    }

    .ui-upload-filelist {
        padding: 5px;
    }

    .ui-upload-filelist p {
        text-align: center;
    }

</style>
<div class="container-fluid">
    <!-- 文件上传进度条 -->
    <div class="flash ui-wedget" id="fsUploadProgress"
         style="position:absolute;display:none;width:210px;top:200px;right:30px; z-index: 10000000;">
    </div>
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">分享编辑</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    {{$this->data['Weshare']['title']}}
                </div>
                <div class="panel-body">
                    <div class="container">
                        <div class="stepwizard">
                            <div class="stepwizard-row setup-panel">
                                <div class="stepwizard-step">
                                    <a href="#step-1" type="button" class="btn btn-primary btn-circle">1</a>

                                    <p>基本信息</p>
                                </div>
                                <div class="stepwizard-step">
                                    <a href="#step-2" type="button" class="btn btn-default btn-circle"
                                       disabled="disabled">2</a>

                                    <p>分享产品</p>
                                </div>
                                <div class="stepwizard-step">
                                    <a href="#step-3" type="button" class="btn btn-default btn-circle"
                                       disabled="disabled">3</a>

                                    <p>物流设置</p>
                                </div>
                                <div class="stepwizard-step">
                                    <a href="#step-4" type="button" class="btn btn-default btn-circle"
                                       disabled="disabled">4</a>

                                    <p>佣金设置</p>
                                </div>
                            </div>
                        </div>
                        <form role="form">
                            <input type="hidden" id="share-id" value="{{$this->data['Weshare']['id']}}">

                            <div class="row setup-content" id="step-1">
                                <div class="col-xs-12">
                                    <div class="col-md-12" id="share-basic-info-panel">
                                        <h3> 基本信息</h3>

                                        <div class="form-group">
                                            <label class="control-label">分享标题</label>
                                            <input maxlength="100" type="text" class="form-control"
                                                   placeholder="分享标题" value="{{$this->data['Weshare']['title']}}"
                                                   id="share-title"/>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">取货信息</label>
                                            <input maxlength="100" type="text" class="form-control"
                                                   placeholder="取货信息" value="{{$this->data['Weshare']['send_info']}}"
                                                   id="share-send-info"/>
                                        </div>
                                        <div class="form-group">
                                            <input type="hidden" value="{{$this->data['Weshare']['images']}}"
                                                   id="share-images">
                                            <label class="control-label">分享图片</label>
                                            {{$this->Swfupload->load('images',array('modelClass' => 'Weshare', 'label'
                                            => ''),true)}}
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label">分享描述</label>
                                            <textarea class="form-control" rows="15" placeholder="分享描述"
                                                      id="share-description">{{$this->data['Weshare']['description']}}</textarea>
                                        </div>
                                        <button class="btn btn-primary btn-lg pull-right" type="button"
                                                id="save-share-basic-info">保存
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="row setup-content" id="step-2">
                                <div class="col-xs-12">
                                    <div class="col-md-12">
                                        <h3> 分享产品</h3>

                                        <div class="col-md-12" id="share-product-info">
                                            {{loop $weshare_products $product}}
                                            <div class='col-md-4 product-item'
                                                 id="share-product-{{$product['WeshareProduct']['id']}}">
                                                <div style="margin:0;padding:0;display:inline">
                                                    <input type="hidden"
                                                           value="{{$product['WeshareProduct']['id']}}" name="product-id"/>

                                                    <div class='form-row'>
                                                        <div class='col-xs-12 form-group required'>
                                                            <label class='control-label'>产品名称/规格</label>
                                                            <input class='form-control' type='text'
                                                                   value="{{$product['WeshareProduct']['name']}}"
                                                                   name="product-name">
                                                        </div>
                                                    </div>
                                                    <div class='form-row'>
                                                        <div class='col-xs-3 form-group required'>
                                                            <label class='control-label'>价格</label>
                                                            <input class='form-control' type="number"
                                                                   value="{{$product['WeshareProduct']['price']}}"
                                                                   name="product-price">
                                                        </div>
                                                        <div class='col-xs-3 form-group required'>
                                                            <label class='control-label'>库存</label>
                                                            <input class='form-control' type='number'
                                                                   value="{{$product['WeshareProduct']['store']}}"
                                                                   name="product-store">
                                                        </div>
                                                        <div class='col-xs-6 form-group required'>
                                                            <label class='control-label'>分组</label>
                                                            <select class="form-control"
                                                                    data-init-val="{{$product['WeshareProduct']['tag_id']}}" name="product-tag">
                                                                <option value="0">默认分组</option>
                                                                {{loop $weshare_tags $tag}}
                                                                <option value="{{$tag['WeshareProductTag']['id']}}">
                                                                    {{$tag['WeshareProductTag']['name']}}
                                                                </option>
                                                                {{/loop}}
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="form-row">
                                                        <div class='col-xs-4 form-group required'>
                                                            <label class="checkbox-inline">
                                                                <input type="checkbox" value="1" name="product-tbd"
                                                                       data-init-val="{{$tag['WeshareProductTag']['tbd']}}">
                                                                价格待定
                                                            </label>
                                                        </div>
                                                        <div class='col-xs-4 form-group required'>
                                                            <label class="checkbox-inline">
                                                                <input type="checkbox" value="1" name="product-limit"
                                                                       data-init-val="{{$tag['WeshareProductTag']['limit']}}">
                                                                限购一份
                                                            </label>
                                                        </div>
                                                        <div class='col-xs-4 form-group required'>
                                                            <label class="checkbox-inline">
                                                                <input type="checkbox" value="1" name="product-deleted"
                                                                       data-init-val="{{$tag['WeshareProductTag']['deleted']}}">
                                                                是否下架
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            {{/loop}}
                                        </div>
                                        <button class="btn btn-primary btn-lg pull-right" type="button">保存</button>
                                    </div>
                                </div>
                            </div>
                            <div class="row setup-content" id="step-3">
                                <div class="col-xs-12">
                                    <div class="col-md-12">
                                        <h3> 物流设置</h3>
                                        <button class="btn btn-success btn-lg pull-right" type="button">保存
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="row setup-content" id="step-4">
                                <div class="col-xs-12">
                                    <div class="col-md-12">
                                        <h3> 佣金设置</h3>
                                        <button class="btn btn-success btn-lg pull-right" type="button">保存
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
</div>
<!-- /.container-fluid -->
<script>
    var swfu_array = [];
    function deleteImg(element) {
        var me = $(element);
        if (me.parents('div.ui-upload-filelist').length > 0) {
            me.parents('div.ui-upload-filelist').remove();
        }
        if (me.parents('li.upload-fileitem').length > 0) {
            me.parents('li.upload-fileitem').remove();
        }
    }
</script>
<script src="/static/sharer/custom/share-edit.js"></script>
{{$this->Html->script(array(
'swfupload/swfupload.js',
'swfupload/swfupload.queue.js',
'swfupload/swfupload.cookies.js',
'swfupload/fileprogress.js',
'swfupload/handlers.js',
))}}
{{$this->fetch('bottomscript')}}