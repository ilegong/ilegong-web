<div class="users form">
<?php 
echo $this->Form->create('Modelcate',array('type'=>'file','id'=>'user-question-add','onsubmit'=>'return submit_modelcates();','url'=>'/modelcates/add/'.$model_data));
?>
<script>
function submit_modelcates(){
	if($('#ModelcateTitle','#user-question-add').val()=='')
	{
		showErrorMessage('类别名称不能为空');
		return false;
	}
	$.ajax({
		async:true, 
		type:'post', 
		success:function(request, xhr) {
				if(request.success)
				{
					$('#QuestionCateId').append('<option value="'+request.cateid+'">'+request.catename+'</option>');
					$('#QuestionCateId').val(request.cateid).trigger('change');
					
					publishController.close_dialog();
					showSuccessMessage("分类已成功建立。");
				}
				else
				{
					$('#question-publish-errorinfo').html('');
					var errorinfo = '';	
					for(var i in request)
					{
						errorinfo +="<span class='ui-state-error ui-corner-all'><span class='ui-icon ui-icon-alert'></span> 错误： "+request[i]+"</span>";
					}
					showErrorMessage(errorinfo);
				}
		}, 
		data:$('#user-question-add').serialize(), 
		url:'/modelcates/add/{{$model_data}}',
		dataType:'json'
	});
	return false; 
}
</script>
<fieldset>
    <div id="article-main" class="tab-pane">
上级分类：{{$this->Form->input('parent_id',array( 'label' => false,'div'=>false ));}}
分类名称： {{$this->Form->input('title',array( 'label' => false,'div'=>false ));}}
<input type="submit" value="提交" id="btnsubmit">
    </div>
    </fieldset>
<?php echo $this->Form->end(); ?>
   
</div>