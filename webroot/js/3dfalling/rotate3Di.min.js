// rotate3Di v0.9.2
// https://github.com/zachstronaut/rotate3Di
// 2012.10.04 - 2009.03.11 Zachary Johnson http://www.zachstronaut.com
// "3D" isometric rotation and animation using CSS3 transformations
// currently supported in Safari/Chrome/Webkit, Firefox 3.5+, IE 9+,
// and Opera 11+. Tested with jQuery 1.3.x through 1.7.2.

(function(e){var t={direction:function(e){return e<0?-1:1},degrees:function(e){return Math.floor(Math.abs(e))%360},scale:function(e){return(1-e%180/90)*(e>=180?-1:1)}};e.fx.step.rotate3Di=function(n){direction=t.direction(n.now);degrees=t.degrees(n.now);scale=t.scale(degrees);if(n.options&&typeof n.options["sideChange"]!="undefined"){if(n.options["sideChange"]){var r=e(n.elem).data("rotate3Di.prevScale");if(scale*r<=0){n.options["sideChange"].call(n.elem,scale>0||r<0);e(n.elem).data("rotate3Di.prevScale",e(n.elem).data("rotate3Di.prevScale")*-1)}}scale=Math.abs(scale)}e(n.elem).data("rotate3Di.degrees",direction*degrees);e(n.elem).css("transform","skewY("+direction*degrees+"deg)"+" scale("+scale+", 1)")};var n=e.fx.prototype.cur;e.fx.prototype.cur=function(){if(this.prop=="rotate3Di"){return e(this.elem).data("rotate3Di.degrees")||0}return n.apply(this,arguments)};e.fn.rotate3Di=function(n,r,i){if(typeof r=="undefined"){r=0}if(typeof i=="object"){e.extend(i,{duration:r})}else{i={duration:r}}if(n=="toggle"){if(e(this).data("rotate3Di.flipped")){n="unflip"}else{n="flip"}}if(n=="flip"){e(this).data("rotate3Di.flipped",true);var s=-1;if(typeof i=="object"&&i["direction"]&&i["direction"]=="clockwise"){s=1}n=s*180}else if(n=="unflip"){e(this).data("rotate3Di.flipped",false);n=0}var o=e(this).data("rotate3Di.degrees")||0;e(this).data("rotate3Di.prevScale",t.scale(t.degrees(o)));e(this).animate({rotate3Di:n},i)}})(jQuery)