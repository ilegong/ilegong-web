!function(window,angular){function GetUserInfoCtr($rootScope,$http,$attrs){function initd(uid){initUid(uid),shareNextPage(),attendNextPage()}function goToShare(id){window.location.href="/weshares/view/"+id}function goToComment(){window.location.href="/weshares/u_comment/"+vm.uid}function changeAvatar(){window.location.href="/users/change_avatar?ref=/weshares/user_share_info"}function focunShare(){vm.focus_share=!0,vm.focus_attend=!1}function focusAttend(){vm.focus_share=!1,vm.focus_attend=!0}function initUid(uid){vm.uid=uid}function attendNextPage(){if(vm.loading||vm.attendOver)return!1;vm.loading=!0;var url="/weshares/get_other_attends/"+vm.uid+"/"+vm.attendPage;$http({method:"GET",url:url}).success(function(data,status){0==data.length?vm.attendOver=!0:(vm.attend=vm.attend.concat(data),vm.attendPage+=1),vm.loading=!1}).error(function(data,status){vm.loading=!1})}function shareNextPage(){if(vm.loading||vm.sharesOver)return!1;vm.loading=!0;var url="/weshares/get_other_shares/"+vm.uid+"/"+vm.sharesPage;$http({method:"GET",url:url}).success(function(data,status){0==data.length?vm.sharesOver=!0:(vm.shares=vm.shares.concat(data),vm.sharesPage+=1),vm.loading=!1}).error(function(data,status){vm.loading=!1})}function sub(){vm.loading=!0,$http({method:"GET",url:"/weshares/subUser/"+vm.uid}).success(function(data){data.success?vm.isSub=1:"not_sub"==data.reason&&(alert("请先关注我们的服务号"),window.location.href="https://mp.weixin.qq.com/s?__biz=MjM5MjY5ODAyOA==&mid=403992659&idx=1&sn=714a1a5f0bb4940f895e60f2f3995544"),vm.loading=!1}).error(function(){vm.loading=!1})}function unSub(){vm.loading=!0,$http({method:"GET",url:"/weshares/unSubUser/"+vm.uid}).success(function(data){data.success?vm.isSub=0:alert("取消失败"),vm.loading=!1}).error(function(){vm.loading=!1}),vm.isShowUnSubButton=!1}function showUnSubButton(){vm.isShowUnSubButton=!vm.isShowUnSubButton}function viewUser(uid){window.location.href="/weshares/user_share_info/"+uid}$rootScope.loadingPage=!1;var vm=this;vm.uid=0,vm.shares=[],vm.attend=[],vm.sharesPage=1,vm.attendPage=1,vm.sharesOver=!1,vm.attendOver=!1,vm.loading=!1,vm.focus_share=!0,vm.focus_attend=!1,vm.isShowUnSubButton=!1,vm.isSub=$attrs.sub,vm.mySharesIng=[],vm.mySharesIngPage=1,vm.mySharesEnd=[],vm.mySharesEndPage=1,vm.mySharesBalance=[],vm.mySharesBalancePage=1,vm.sub=sub,vm.unSub=unSub,vm.showUnSubButton=showUnSubButton,vm.shareNextPage=shareNextPage,vm.attendNextPage=attendNextPage,vm.viewUser=viewUser,vm.initUid=initUid,vm.focunShare=focunShare,vm.focusAttend=focusAttend,vm.changeAvatar=changeAvatar,vm.goToComment=goToComment,vm.goToShare=goToShare,vm.initd=initd}angular.module("weshares").controller("GetUserInfoCtr",GetUserInfoCtr)}(window,window.angular);