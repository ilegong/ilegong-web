!function(window,angular){function IndexCtrl($scope,$rootScope,$http,$log,$attrs,Utils,CoreReactorChannel){function activate(){$rootScope.showUnReadMark=!1,$rootScope.proxies=[],$rootScope.loadingPage=!1,vm.uid=-1;var tag=$attrs.tag;vm.indexProducts=[],$http.get("/index_products/index_products/"+tag).success(function(data){vm.indexProducts=_.map(data,function(p){return{id:p.IndexProduct.id,shareId:p.IndexProduct.share_id,summary:p.IndexProduct.summary}})}).error(function(data,e){$log.log("Failed to get index products: "+e)})}function addPageClickLog(data){$rootScope.addPageClickLog(data)}function getSummary(shareId){var indexProduct=_.find(vm.indexProducts,function(p){return p.shareId==shareId});return _.isEmpty(indexProduct)?{orders_count:0,view_count:0,orders_and_creators:[]}:indexProduct.summary}function viewMyScore(needBindMobile){return vm.addPageClickLog({page:"index",position:"userFunc",value:"score"}),needBindMobile?void CoreReactorChannel.elevatedEvent("BindMobile",{}):void(window.location.href="/scores/detail.html")}var vm=this;vm.staticFilePath=Utils.staticFilePath(),vm.getSummary=getSummary,vm.addPageClickLog=addPageClickLog,vm.viewMyScore=viewMyScore,activate()}angular.module("weshares").controller("IndexCtrl",IndexCtrl)}(window,window.angular);