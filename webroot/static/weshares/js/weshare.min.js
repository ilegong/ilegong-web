angular.module("me-lazyload",[]).directive("lazySrc",["$window","$document",function($window,$document){function getUid(el){return el.__uid||(el.__uid=""+ ++uid)}function getWindowOffset(){var t,pageXOffset="number"==typeof win.pageXOffset?win.pageXOffset:(((t=doc.documentElement)||(t=body.parentNode))&&"number"==typeof t.ScrollLeft?t:body).ScrollLeft,pageYOffset="number"==typeof win.pageYOffset?win.pageYOffset:(((t=doc.documentElement)||(t=body.parentNode))&&"number"==typeof t.ScrollTop?t:body).ScrollTop;return{offsetX:pageXOffset,offsetY:pageYOffset}}function isVisible(iElement){var xVisible,yVisible,elem=iElement[0],elemRect=elem.getBoundingClientRect(),windowOffset=getWindowOffset(),winOffsetX=windowOffset.offsetX,winOffsetY=windowOffset.offsetY,elemWidth=elemRect.width,elemHeight=elemRect.height,elemOffsetX=elemRect.left+winOffsetX,elemOffsetY=elemRect.top+winOffsetY,viewWidth=Math.max(doc.documentElement.clientWidth,win.innerWidth||0),viewHeight=Math.max(doc.documentElement.clientHeight,win.innerHeight||0);return winOffsetY>=elemOffsetY?elemOffsetY+elemHeight>=winOffsetY&&(yVisible=!0):elemOffsetY>=winOffsetY&&winOffsetY+viewHeight>=elemOffsetY&&(yVisible=!0),winOffsetX>=elemOffsetX?elemOffsetX+elemWidth>=winOffsetX&&(xVisible=!0):elemOffsetX>=winOffsetX&&winOffsetX+viewWidth>=elemOffsetX&&(xVisible=!0),xVisible&&yVisible}function checkImage(){Object.keys(elements).forEach(function(key){var obj=elements[key],iElement=obj.iElement,$scope=obj.$scope;isVisible(iElement)&&iElement.attr("src",$scope.lazySrc)})}function onLoad(){var $el=angular.element(this),uid=getUid($el);$el.css("opacity",1),elements.hasOwnProperty(uid)&&delete elements[uid]}var doc=$document[0],body=doc.body,win=$window,$win=angular.element(win),uid=0,elements={};return $win.bind("scroll",checkImage),$win.bind("resize",checkImage),{restrict:"A",scope:{lazySrc:"@"},link:function($scope,iElement){iElement.bind("load",onLoad),$scope.$watch("lazySrc",function(){if(isVisible(iElement))iElement.attr("src")||iElement.attr("src",$scope.lazySrc);else{var uid=getUid(iElement);iElement.css({"background-color":"#fff",opacity:0,"-webkit-transition":"opacity 1s",transition:"opacity 1s"}),elements[uid]={iElement:iElement,$scope:$scope}}}),$scope.$on("$destroy",function(){iElement.unbind("load")})}}}]),function(window,angular){angular.module("module.filters",[]).filter("thumb",function(){return function(input,type){if(input=input||"",input.indexOf("/s/")>=0||input.indexOf("/m/")>=0)return input;var thumb_type="s";return"m"==type&&(thumb_type="m"),input.indexOf("avatar/")>=0?input.replace("/avatar/","/avatar/"+thumb_type+"/"):input.indexOf("/images/")>=0?input.replace("/images/","/images/"+thumb_type+"/"):input}})}(window,window.angular),function(window,angular){angular.module("module.directives",[]).directive("fallbackSrc",function(){var fallbackSrc={link:function(scope,iElement,iAttrs){iElement.bind("error",function(){var oldSrc=angular.element(this).attr("src");oldSrc!=iAttrs.fallbackSrc&&angular.element(this).attr("src",iAttrs.fallbackSrc)})}};return fallbackSrc}).directive("stringToNumber",function(){return{require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$parsers.push(function(value){return""+value}),ngModel.$formatters.push(function(value){return parseFloat(value)})}}})}(window,window.angular),function(window,angular){function Utils(){function isMobileValid(mobile){return/^1\d{10}$/.test(mobile)}function isBlank(str){return!str||/^\s*$/.test(str)}function isNumber(n){return!isNaN(n)}function toPercent(value){return Math.min(Math.round(1e4*value)/100,100)}return{isBlank:isBlank,isMobileValid:isMobileValid,isNumber:isNumber,toPercent:toPercent}}angular.module("module.services",[]).service("Utils",Utils)}(window,window.angular),function(window,angular){function configCompileProvider($compileProvider){$compileProvider.imgSrcSanitizationWhitelist(/^\s*(https|file|blob|cdvfile|http|chrome-extension|blob:chrome-extension):|data:image\//)}function configHttpProvider($httpProvider){$httpProvider.defaults.headers.common["Content-Type"]="application/json",$httpProvider.defaults.headers.post["Content-Type"]="application/json"}function extendLog($provide){$provide.decorator("$log",function($delegate,$injector){var _log=$delegate.log,_warn=$delegate.warn,_info=$delegate.info,_debug=$delegate.debug,_error=$delegate.error,addMessage=function(message,forceLog){var $rootScope=$injector.get("$rootScope");return $rootScope.config=$rootScope.config||{logMode:!1},($rootScope.config.logMode||forceLog)&&($rootScope.messages=$rootScope.messages||[],$rootScope.messages.push(message)),message};return $delegate.log=function(msg,forceLog){return _log(addMessage(msg,forceLog||!1)),this},$delegate.warn=function(msg,forceLog){return _warn(addMessage(msg,forceLog||!1)),this},$delegate.info=function(msg,forceLog){return _info(addMessage(msg,forceLog||!1)),this},$delegate.debug=function(msg,forceLog){return _debug(addMessage(msg,forceLog||!1)),this},$delegate.error=function(msg,forceLog){return _error(addMessage(msg,forceLog||!1)),this},$delegate})}function initApp($rootScope){$rootScope._=_,$rootScope.loadingPage=!0}var app=angular.module("weshares",["infinite-scroll","module.services","module.filters","module.directives","me-lazyload"]).constant("_",window._).config(configCompileProvider).config(configHttpProvider).config(extendLog).config(["$sceDelegateProvider",function($sceDelegateProvider){$sceDelegateProvider.resourceUrlWhitelist(["self",PYS.staticFilePath+"/**"])}]).run(initApp);app.factory("CoreReactorChannel",function($rootScope){var elevatedEvent=function(event,data){$rootScope.$broadcast(event,data)},onElevatedEvent=function($scope,event,handler){$scope.$on(event,function(e,data){handler(data)})};return{elevatedEvent:elevatedEvent,onElevatedEvent:onElevatedEvent}}),app.factory("ShareOrder",function($http,$templateCache){function merge_options(obj1,obj2){var obj3={};for(var attrname in obj1)obj3[attrname]=obj1[attrname];for(var attrname in obj2)obj3[attrname]=obj2[attrname];return obj3}var ShareOrder=function(){this.orders=[],this.order_cart_map={},this.rebate_logs={},this.users={},this.levelData={},this.shareId=0,this.busy=!1,this.noMore=!1,this.page=1,this.pageInfo={},this.referShareId=0,this.loadedShareIds=[],this.orderComments={},this.orderCommentReplies={},this.combineComment=1};return ShareOrder.prototype.nextPage=function(){if(!this.busy&&!this.noMore){if(this.page>this.pageInfo.page_count){if(!this.referShareId||0==this.referShareId)return void(this.noMore=!0);this.loadedShareIds.push(this.shareId),this.shareId=this.referShareId,this.page=1}this.busy=!0;var url="/weshares/get_share_order_by_page/"+this.shareId+"/"+this.page+".json?combineComment="+this.combineComment;$http({method:"GET",url:url,cache:$templateCache}).success(function(data,status){this.busy=!1,this.orders=this.orders.concat(data.orders),this.order_cart_map=merge_options(this.order_cart_map,data.order_cart_map),this.rebate_logs=merge_options(this.rebate_logs,data.rebate_logs),this.users=merge_options(this.users,data.users),this.levelData=merge_options(this.levelData,data.level_data),data.page_info&&(this.pageInfo=data.page_info,this.referShareId=data.page_info.refer_share_id),data.comment_data&&(this.orderComments=merge_options(this.orderComments,data.comment_data.order_comments),this.orderCommentReplies=merge_options(this.orderCommentReplies,data.comment_data.comment_replies)),this.page=this.page+1}.bind(this)).error(function(data,status){})}},ShareOrder}),app.constant("staticFilePath",PYS.staticFilePath),app.constant("shipTypes",{101:"申通",102:"圆通",103:"韵达",104:"顺丰",105:"EMS",106:"邮政包裹",107:"天天",108:"汇通",109:"中通",110:"全一",111:"宅急送",112:"全峰",113:"快捷",115:"城际快递",132:"优速",133:"增益快递",134:"万家康",135:"京东快递",136:"德邦快递",137:"自提",138:"百富达",139:"黑狗",140:"E快送",141:"国通快递",142:"人人快递",143:"百世汇通"}),app.filter("unsafe",function($sce){return function(val){return $sce.trustAsHtml(val)}}),app.directive("readMore",function(){return{restrict:"A",transclude:!0,replace:!0,scope:{moreText:"@",lessText:"@",words:"@",ellipsis:"@","char":"@",limit:"@",content:"@"},link:function(scope,elem,attr,ctrl,transclude){function readmore(text){var text=text,orig=text,regex=/\s+/gi,charCount=text.length,wordCount=text.trim().replace(regex," ").split(" ").length,countBy="char",count=charCount,foundWords=[],markup=text,more="";angular.isUndefined(attr.words)||(countBy="words",count=wordCount),"words"===countBy?(foundWords=text.split(/\s+/),foundWords.length>limit&&(text=foundWords.slice(0,limit).join(" ")+ellipsis,more=foundWords.slice(limit,count).join(" "),markup='<div class="less-text">'+text+moreText+'</div><div class="more-text">'+orig+lessText+"</div>")):count>limit&&(text=orig.slice(0,limit)+ellipsis,text=text.replace(/<\/?[^>]+(>|$)/g,""),more=orig.slice(limit,count),markup='<div class="less-text">'+text+moreText+'</div><div class="more-text">'+orig+lessText+"</div>"),elem.append(markup),angular.element(document.getElementsByClassName("read-more")[0]).bind("click",function(){document.getElementsByClassName("less-text")[0].style.display="none",document.getElementsByClassName("read-more")[0].style.display="none",document.getElementsByClassName("more-text")[0].style.display="block",document.getElementsByClassName("read-less")[0].style.display="block",videoIFrame=document.getElementById("video"),videoIFrame&&(video.style.dislay="block")}),angular.element(document.getElementsByClassName("read-less")[0]).bind("click",function(){document.getElementsByClassName("less-text")[0].style.display="block",document.getElementsByClassName("read-more")[0].style.display="block",document.getElementsByClassName("more-text")[0].style.display="none",document.getElementsByClassName("read-less")[0].style.display="none",videoIFrame=document.getElementById("video"),videoIFrame&&(video.style.dislay="none")})}var moreText=angular.isUndefined(scope.moreText)?' <a class="read-more">Read More...</a>':' <a class="read-more">'+scope.moreText+"</a>",lessText=angular.isUndefined(scope.lessText)?' <a class="read-less">Less ^</a>':' <a class="read-less">'+scope.lessText+"</a>",ellipsis=angular.isUndefined(scope.ellipsis)?"":scope.ellipsis,limit=angular.isUndefined(scope.limit)?150:scope.limit;attr.$observe("content",function(str){readmore(str)}),transclude(scope.$parent,function(clone,scope){readmore(clone.text().trim())})}}})}(window,window.angular),function(window,angular){function OfflineStore(){function ChooseOfflineStore($vm){function showChooseOfflineStore(){$vm.showOfflineStoreDetailView=!1,$vm.chooseOfflineStoreView=!0,$vm.showShareDetailView=!1,$vm.showBalanceView=!1}function chooseOfflineStore(offlineStore){$vm.showOfflineStoreDetailView=!1,$vm.chooseOfflineStoreView=!1,$vm.showShareDetailView=!1,$vm.showBalanceView=!0,$vm.checkedOfflineStore=offlineStore}function showOfflineStoreDetail(offlineStore){if(!offlineStore.mapImg){var pointStr=offlineStore.location_long+","+offlineStore.location_lat,reversePointStr=offlineStore.location_lat+","+offlineStore.location_long,pointName=offlineStore.alias;offlineStore.mapImg="http://api.map.baidu.com/staticimage?width=400&height=200&center="+pointStr+"&markers="+pointName+"|"+pointStr+"&zoom=18&markerStyles=l,A,0xff0000",offlineStore.mapDetailUrl="http://api.map.baidu.com/marker?location="+reversePointStr+"&title="+pointName+"&content="+pointName+"&output=html"}$vm.currentOfflineStore=offlineStore,$vm.showOfflineStoreDetailView=!0,$vm.chooseOfflineStoreView=!1,$vm.showShareDetailView=!1,$vm.showBalanceView=!1}function changeOfflineStoreArea(code){$vm.currentAreaCode=code}$vm.areas={110101:{name:"东城区"},110108:{name:"海淀区"},110102:{name:"西城区"},110105:{name:"朝阳区"},110106:{name:"丰台区"},110114:{name:"昌平区"},110113:{name:"顺义区"},110115:{name:"大兴区"},110112:{name:"通州区"}},$vm.currentAreaCode="110101",$vm.offlineStores={110101:{7:{id:"7",shop_no:"300",area_id:"110101",alias:"东直门南小街店",name:"东城区，东直门南小街20-1，好邻居便利店(300)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.43254",location_lat:"39.940958",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},14:{id:"14",shop_no:"251",area_id:"110101",alias:"金宝街金宝汇店",name:"东城区，金宝街道临时3号，好邻居便利店(251)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.429121",location_lat:"39.921926",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},15:{id:"15",shop_no:"146",area_id:"110101",alias:"兴化西里和平里医院店",name:"东城区，兴华西里2号楼南侧，好邻居便利店(146)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.419989",location_lat:"39.96611",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},257:{id:"257",shop_no:"146",area_id:"110101",alias:"好邻居兴化路店",name:"东城区兴华西里2号楼南侧",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.965882",location_lat:"116.420416",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},265:{id:"265",shop_no:"121",area_id:"110101",alias:"好邻居甘家口店",name:"西城区阜外大街44号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.92837",location_lat:"116.342501",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},279:{id:"279",shop_no:"399",area_id:"110101",alias:"和平里医院西分店",name:"东城区和平里北街18号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.965267",location_lat:"116.420259",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},289:{id:"289",shop_no:"219",area_id:"110101",alias:"北京国际大厦店",name:"好邻居中关村南大街店",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.959402",location_lat:"116.331593",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},310:{id:"310",shop_no:"824",area_id:"110101",alias:"安外大街蒋宅口店",name:"东城区安定门外大街82号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.420932",location_lat:"39.965267",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},311:{id:"311",shop_no:"225",area_id:"110101",alias:"好邻居北三环东路店",name:"海淀区中关村南大街1号友谊宾馆61711房间",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.326571",location_lat:"39.97204",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},312:{id:"312",shop_no:"831",area_id:"110101",alias:"安定门上龙西里店",name:"东城区安定门外上龙西里36号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.412892",location_lat:"39.959557",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},321:{id:"321",shop_no:"381",area_id:"110101",alias:"新太仓胡同簋街店",name:"东城区新太仓胡同1号1号楼一层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.42759",location_lat:"39.946165",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},332:{id:"332",shop_no:"234",area_id:"110101",alias:"胜古北路西口店",name:"东城区安定路20号院5号楼102",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.415163",location_lat:"39.9788",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},350:{id:"350",shop_no:"229",area_id:"110101",alias:"好邻居都市馨园店",name:"崇文区兴隆都市馨园地上一层A101",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.42174",location_lat:"39.901802",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},373:{id:"373",shop_no:"258",area_id:"110101",alias:"好邻居广义街店",name:"宣武区广安门内大街311号院2号楼祥龙大厦首层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.363458",location_lat:"39.896673",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},378:{id:"378",shop_no:"265",area_id:"110101",alias:"好邻居美术馆后街店",name:"北京市东城区大佛寺东街1号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.415589",location_lat:"39.936165",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},387:{id:"387",shop_no:"287",area_id:"110101",alias:"好邻居安定门内店",name:"北京市东城区安定门内大街16号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.954631",location_lat:"116.414941",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},391:{id:"391",shop_no:"290",area_id:"110101",alias:"好邻居东四北店",name:"北京市东城区东四北大街146号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.423759",location_lat:"39.941014",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},398:{id:"398",shop_no:"312",area_id:"110101",alias:"好邻居美术馆东街店",name:"北京市东城区美术馆后街9号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.415629",location_lat:"39.936304",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},403:{id:"403",shop_no:"304",area_id:"110101",alias:"东城区张自忠路2号",name:"好邻居张自忠路店",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.422575",location_lat:"39.939621",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},406:{id:"406",shop_no:"305",area_id:"110101",alias:"好邻居前门西大街店西",name:"西城区前门西大街57号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.393358",location_lat:"39.90677",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},408:{id:"408",shop_no:"309",area_id:"110101",alias:"好邻居德胜东口店",name:"西城区德胜门内大街6号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.386649",location_lat:"39.954094",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},411:{id:"411",shop_no:"311",area_id:"110101",alias:"好邻居沙滩北街店",name:"东城区五四大街沙滩北街求是杂志社对面",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.409818",location_lat:"39.931568",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},414:{id:"414",shop_no:"316",area_id:"110101",alias:"好邻居紫竹院路店",name:"海淀区紫竹院路车道沟粮店",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.306968",location_lat:"39.951495",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},420:{id:"420",shop_no:"328",area_id:"110101",alias:"五四大街二分店",name:"北京市东城区沙滩北街甲2号五四大街甲31号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.411039",location_lat:"39.9307",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},422:{id:"422",shop_no:"331",area_id:"110101",alias:"东四大街三分店",name:"东城区东四北大街43号首层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.42303",location_lat:"39.946084",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},424:{id:"424",shop_no:"333",area_id:"110101",alias:"沙滩后街分店",name:"东城区沙滩后街53号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.931855",location_lat:"116.408147",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},430:{id:"430",shop_no:"347",area_id:"110101",alias:"好邻居东营房店",name:"东城区吉士口东路聚龙花园对面东城区东营房八条3号楼",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.936417",location_lat:"116.446781",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},438:{id:"438",shop_no:"300",area_id:"110101",alias:"好邻居东直南小店",name:"北京市东直门南小街20-1",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.432541",location_lat:"39.940965",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""}},110102:{9:{id:"9",shop_no:"221",area_id:"110102",alias:"友谊医院店",name:"西城区，永安路32号，好邻居便利店(221)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.401018",location_lat:"39.892384",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},25:{id:"25",shop_no:"116",area_id:"110102",alias:"佟麟阁路新华社店",name:"西城区，佟麟阁路91号，好邻居便利店(116)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.374796",location_lat:"39.9067",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},26:{id:"26",shop_no:"110",area_id:"110102",alias:"月坛北街店",name:"西城区，月坛北街11号楼7号，好邻居便利店(110)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.352528",location_lat:"39.924319",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},42:{id:"42",shop_no:"416",area_id:"110102",alias:"木樨地好邻居",name:"西城区，木樨地25号，好邻居便利店(416)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.345032",location_lat:"39.913418",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},259:{id:"259",shop_no:"116",area_id:"110102",alias:"好邻居佟麟阁路店",name:"西城区佟麟阁路91号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.90687",location_lat:"116.374897",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},261:{id:"261",shop_no:"119",area_id:"110102",alias:"好邻居德内大街店",name:"西城区德内大街232号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.944099",location_lat:"116.386256",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},262:{id:"262",shop_no:"114",area_id:"110102",alias:"好邻居半壁街店",name:"西城区前半壁街35号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.944109",location_lat:"116.366064",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},263:{id:"263",shop_no:"389",area_id:"110102",alias:"地安门厂桥小学店",name:"西城区地安门西大街163号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.939216",location_lat:"116.38465",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},269:{id:"269",shop_no:"103",area_id:"110102",alias:"好邻居西四店",name:"西城区西四北大街158号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.933129",location_lat:"116.380035",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},271:{id:"271",shop_no:"118",area_id:"110102",alias:"好邻居旧鼓楼大街店",name:"西城区小石桥胡同3号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.952481",location_lat:"116.400045",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},273:{id:"273",shop_no:"109",area_id:"110102",alias:"好邻居二龙路店",name:"西城区二龙路41号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.916012",location_lat:"39.916012",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},275:{id:"275",shop_no:"112",area_id:"110102",alias:"好邻居宇宙红店",name:"西城区百万庄南街4号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.931903",location_lat:"116.34421",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},277:{id:"277",shop_no:"105",area_id:"110102",alias:"好邻居展览路店",name:"西城区展览路31号楼",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.931276",location_lat:"116.350293",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},278:{id:"278",shop_no:"402",area_id:"110102",alias:"护国寺路口南店",name:"西城区新南大街154号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"40.063954",location_lat:"116.184985",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},280:{id:"280",shop_no:"102",area_id:"110102",alias:"好邻居车公庄店",name:"西城区车公庄西口29号楼",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.937759",location_lat:"39.937759",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},282:{id:"282",shop_no:"110",area_id:"110102",alias:"好邻居月坛北街店",name:"西城区月坛北街11号楼7号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.924323",location_lat:"116.352528",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},284:{id:"284",shop_no:"101",area_id:"110102",alias:"好邻居中轴路店",name:"西城区裕中东里2号楼",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.979206",location_lat:"116.398644",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},285:{id:"285",shop_no:"223",area_id:"110102",alias:"英蓝国际店",name:"北京市西城区金融大街7号英蓝国际金融中心B120（周一至周六营业）",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.364326",location_lat:"39.926289",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},296:{id:"296",shop_no:"501",area_id:"110102",alias:"好邻居中关村南大街店",name:"西城区西四南大街111号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.924936",location_lat:"116.380005",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},297:{id:"297",shop_no:"401",area_id:"110102",alias:"好邻居榆树馆店",name:"西城区榆树馆15号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.94284",location_lat:"116.351401",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},299:{id:"299",shop_no:"817",area_id:"110102",alias:"槐柏树街店",name:"西城区槐柏树街北里5号楼5-8号A",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.902009",location_lat:"116.361527",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},300:{id:"300",shop_no:"221",area_id:"110102",alias:"好邻居永安路东店",name:"北京市宣武区永安路32号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.401073",location_lat:"39.892503",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},301:{id:"301",shop_no:"176",area_id:"110102",alias:"好邻居阜外大街店",name:"西城区阜外大街37号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.929138",location_lat:"116.346122",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},302:{id:"302",shop_no:"209",area_id:"110102",alias:"冠英园店",name:"西城区西直门内大街132号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.946345",location_lat:"116.371861",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},303:{id:"303",shop_no:"170",area_id:"110102",alias:"好邻居百万庄店",name:"西城区百万庄大街31号院1号楼1门1层2号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.934364",location_lat:"116.350088",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},306:{id:"306",shop_no:"224",area_id:"110102",alias:"好邻居新德街店",name:"北京西城区新德街东口",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.384438",location_lat:"39.963915",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},318:{id:"318",shop_no:"382",area_id:"110102",alias:"护国寺公交站店",name:"西城区新街口南大街144号一层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.381515",location_lat:"39.948668",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},322:{id:"322",shop_no:"222",area_id:"110102",alias:"好邻居丰盛店",name:"西城区西四南大街111号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.380005",location_lat:"39.924936",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},323:{id:"323",shop_no:"380",area_id:"110102",alias:"宣武门西大街分店",name:"西城区宣武门西大街103号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.370212",location_lat:"39.904687",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},339:{id:"339",shop_no:"416",area_id:"110102",alias:"好邻居复兴门中路店",name:"西城区木樨地25号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.913461",location_lat:"116.345005",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},340:{id:"340",shop_no:"417",area_id:"110102",alias:"好邻居官园店",name:"西城区官园南里三区1-1",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.937975",location_lat:"116.366814",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},343:{id:"343",shop_no:"418",area_id:"110102",alias:"好邻居辟才胡同店",name:"西城区辟才胡同56号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.920193",location_lat:"116.377419",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},346:{id:"346",shop_no:"420",area_id:"110102",alias:"好邻居地安门店",name:"西城区地外大街178号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.940582",location_lat:"116.402904",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},352:{id:"352",shop_no:"421",area_id:"110102",alias:"好邻居万方园店",name:"西城区葱店胡同2号院1号楼",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.943645",location_lat:"116.36514",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},354:{id:"354",shop_no:"422",area_id:"110102",alias:"好邻居西便门店",name:"西城区复兴门南大街1号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.907359",location_lat:"116.362753",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},355:{id:"355",shop_no:"423",area_id:"110102",alias:"好邻居三里河店",name:"西城区月坛南街37号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.919879",location_lat:"116.353503",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},358:{id:"358",shop_no:"403",area_id:"110102",alias:"好邻居灵境胡同店",name:"西城区灵镜胡同1号楼",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.920853",location_lat:"116.386711",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},359:{id:"359",shop_no:"404",area_id:"110102",alias:"好邻居月坛南街店",name:"西城区月坛南街甲1号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.91982",location_lat:"116.359306",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},360:{id:"360",shop_no:"405",area_id:"110102",alias:"好邻居西什库店",name:"西城区西什库大街24号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.93416",location_lat:"116.386686",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},361:{id:"361",shop_no:"406",area_id:"110102",alias:"好邻居鼓楼西店",name:"西城区鼓楼大街93号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.950309",location_lat:"116.395251",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},362:{id:"362",shop_no:"407",area_id:"110102",alias:"好邻居宏大店",name:"西城区地外大街19号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.945682",location_lat:"116.402319",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},363:{id:"363",shop_no:"409",area_id:"110102",alias:"好邻居北新华街店",name:"西城区北新华街88号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.910356",location_lat:"116.39084",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},364:{id:"364",shop_no:"410",area_id:"110102",alias:"好邻居白云里店",name:"西城区白云里丙1号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.905357",location_lat:"116.353689",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},365:{id:"365",shop_no:"411",area_id:"110102",alias:"好邻居月坛西街店",name:"西城区月坛西街21号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.922352",location_lat:"116.356126",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},366:{id:"366",shop_no:"412",area_id:"110102",alias:"好邻居德内大街北店",name:"西城区德内大街169号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.948195",location_lat:"116.385315",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},367:{id:"367",shop_no:"413",area_id:"110102",alias:"好邻居赵登禹路店",name:"西城区赵登禹路148号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.934596",location_lat:"116.374054",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},368:{id:"368",shop_no:"201",area_id:"110102",alias:"好邻居白石桥店",name:"海淀区中关村南大街48-9平房",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.948923",location_lat:"116.332037",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},369:{id:"369",shop_no:"208",area_id:"110102",alias:"好邻居永安路店",name:"宣武区永安路104号G间",
type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.89244",location_lat:"116.394263",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},370:{id:"370",shop_no:"211",area_id:"110102",alias:"好邻居西四东店",name:"西城区西安门大街152号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.928371",location_lat:"116.380402",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},374:{id:"374",shop_no:"260",area_id:"110102",alias:"好邻居棉花胡同北口店",name:"西城区新街口东街53号4幢号楼房一层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.38109",location_lat:"39.94842",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},375:{id:"375",shop_no:"261",area_id:"110102",alias:"好邻居西四北大街店",name:"西城区西四北大街5号平房",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.38008",location_lat:"39.938001",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},377:{id:"377",shop_no:"266",area_id:"110102",alias:"好邻居德外店",name:"北京市西城区德外大街11号，德胜园区",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.385493",location_lat:"39.966536",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},379:{id:"379",shop_no:"270",area_id:"110102",alias:"好邻居月坛北桥店",name:"北京市西城区阜成门南大街9号楼",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.362562",location_lat:"39.924593",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},385:{id:"385",shop_no:"280",area_id:"110102",alias:"好邻居什刹海店",name:"北京市西城区地安门西大街47号5号房",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.400289",location_lat:"39.94003",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},399:{id:"399",shop_no:"314",area_id:"110102",alias:"好邻居积水潭北店",name:"西城区新街口外大街28-13",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.378253",location_lat:"39.959436",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},402:{id:"402",shop_no:"302",area_id:"110102",alias:"好邻居鸭子桥北店",name:"宣武区南滨河31号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.355091",location_lat:"39.88646",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},404:{id:"404",shop_no:"306",area_id:"110102",alias:"好邻居西四东街店",name:"西城区西四东大街62号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.380553",location_lat:"39.929939",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},415:{id:"415",shop_no:"154",area_id:"110102",alias:"新南店",name:"西城区新街口南大街48号。新街口饭店往南200米路东。",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.379719",location_lat:"39.94411",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},417:{id:"417",shop_no:"166",area_id:"110102",alias:"新德店",name:"西城区新外大街小西天东里7号，好邻居总部楼下",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.378581",location_lat:"39.961568",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},419:{id:"419",shop_no:"138",area_id:"110102",alias:"北滨河店",name:"西城区北滨河路2号院",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.359098",location_lat:"39.906494",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},428:{id:"428",shop_no:"508",area_id:"110102",alias:"木樨地店J",name:"西城区复兴门外大街甲22号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.912755",location_lat:"116.346132",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},434:{id:"434",shop_no:"841",area_id:"110102",alias:"北三环中路3分店",name:"西城区北三环中路18号一层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.973624",location_lat:"116.389087",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""}},110105:{3:{id:"3",shop_no:"275",area_id:"110105",alias:"丽都饭店东门店",name:"朝阳区，高家园小区311号，好邻居便利店(275)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.486509",location_lat:"39.984958",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},4:{id:"4",shop_no:"322",area_id:"110105",alias:"七圣路光熙门北里店",name:"朝阳区，光熙门北里甲31号，好邻居便利店(322)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.442097",location_lat:"39.973949",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},5:{id:"5",shop_no:"298",area_id:"110105",alias:"慧忠北路店",name:"朝阳区，慧忠北路慧忠里231楼鼓浪屿会所一层底商，好邻居便利店(298)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.407968",location_lat:"40.004823",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},6:{id:"6",shop_no:"291",area_id:"110105",alias:"酒仙桥路京都国际店",name:"朝阳区，酒仙桥路26号院1号楼A05号，好邻居便利店(291)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.500083",location_lat:"39.970223",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},10:{id:"10",shop_no:"343",area_id:"110105",alias:"管庄西里店",name:"朝阳区，朝阳路管庄西里65号，佳得宾馆楼下金凤成祥旁边好邻居便利店(343)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.595474",location_lat:"39.918661",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},11:{id:"11",shop_no:"148",area_id:"110105",alias:"北沙滩枫林绿洲店",name:"朝阳区，大屯路风林绿洲小区6号楼底商D单元S-F06-01D，好邻居便利店(148)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.390494",location_lat:"40.00807",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},12:{id:"12",shop_no:"249",area_id:"110105",alias:"广顺桥南博雅国际店",name:"朝阳区，利泽中一路1号望京科技大厦商铺，好邻居便利店(249)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.47653",location_lat:"40.019315",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},97:{id:"97",shop_no:"237",area_id:"110105",alias:"好邻居定福庄店",name:"朝阳区，定福庄北街7号楼西侧平房北京文教用品厂内，好邻居便利店(237)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.923365",location_lat:"116.560242",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},260:{id:"260",shop_no:"531",area_id:"110105",alias:"好邻居林达店",name:"朝阳区东北二环外林达大厦",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.962122",location_lat:"116.439102",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},287:{id:"287",shop_no:"148",area_id:"110105",alias:"好邻居北沙滩店",name:"朝阳区大屯路风林绿洲小区6号楼底商D单元S-F06-01D",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"40.008075",location_lat:"116.390495",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},290:{id:"290",shop_no:"150",area_id:"110105",alias:"好邻居雅宝路店",name:"朝阳区外交部南街8号，京华豪园南座213-C。",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.923624",location_lat:"116.443117",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},304:{id:"304",shop_no:"818",area_id:"110105",alias:"芍药居2号院店",name:"朝阳区太阳宫芍药居2号院甲2号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.438204",location_lat:"39.986223",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},307:{id:"307",shop_no:"823",area_id:"110105",alias:"望京西园星源国际A座店",name:"朝阳区望京西园222楼A-103号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.474849",location_lat:"40.008671",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},308:{id:"308",shop_no:"184",area_id:"110105",alias:"好邻居红领巾桥店",name:"朝阳区延静东里甲3号商务学院综合楼一层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.928626",location_lat:"116.494072",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},309:{id:"309",shop_no:"185",area_id:"110105",alias:"好邻居花家地店",name:"朝阳区望京中环南路5号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.988666",location_lat:"116.48105",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},327:{id:"327",shop_no:"378",area_id:"110105",alias:"甜水园东街分店",name:"朝阳区甜水园东街10号17号楼1-3",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.48544",location_lat:"39.92896",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},334:{id:"334",shop_no:"327",area_id:"110105",alias:"好邻居望京西园店",name:"朝阳区望京西园222楼星源公寓E座底商E-3号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"40.008675",location_lat:"116.474847",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},335:{id:"335",shop_no:"375",area_id:"110105",alias:"酒仙桥360大厦店",name:"朝阳区酒仙桥路6号院2号楼",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.497046",location_lat:"39.988765",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},336:{id:"336",shop_no:"326",area_id:"110105",alias:"好邻居永安里中街店",name:"朝阳区建国门外大街永安里中街25号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.911324",location_lat:"116.456232",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},337:{id:"337",shop_no:"218",area_id:"110105",alias:"好邻居广渠路店",name:"朝阳区广渠东路33号沿海赛洛城底商",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.511862",location_lat:"39.901627",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},341:{id:"341",shop_no:"373",area_id:"110105",alias:"建华南路商通大厦店",name:"北京市朝阳区建国门外大街建华南路11号商通大厦底商",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.450102",location_lat:"39.911605",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},342:{id:"342",shop_no:"321",area_id:"110105",alias:"好邻居工体南路店",name:"北京市朝阳区工体南路朝阳医院西侧",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.45747",location_lat:"39.932487",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},344:{id:"344",shop_no:"372",area_id:"110105",alias:"建华南路美华世纪店",name:"北京市朝阳区建华南路15号美华世纪大厦1层1-78号房屋",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.449915",location_lat:"39.910699",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},345:{id:"345",shop_no:"322",area_id:"110105",alias:"好邻居七圣路分店",name:"北京市朝阳区光熙门北里甲31号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.442098",location_lat:"39.97395",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},351:{id:"351",shop_no:"369",area_id:"110105",alias:"工体春秀路店",name:"北京市朝阳区工人体育场北路1号3号楼一层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.456211",location_lat:"39.939741",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},356:{id:"356",shop_no:"239",area_id:"110105",alias:"好邻居百子湾三店",name:"朝阳区百子湾路16号百子园14号楼B门101号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.491909",location_lat:"39.906244",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},372:{id:"372",shop_no:"249",area_id:"110105",alias:"好邻居广顺桥南店",name:"朝阳区利泽中一路1号望京科技大厦商铺",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"1116.476429",location_lat:"40.01963",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},382:{id:"382",shop_no:"275",area_id:"110105",alias:"好邻居丽都店",name:"北京市朝阳区高家园小区311号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.486506",location_lat:"39.984957",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},383:{id:"383",shop_no:"277",area_id:"110105",alias:"好邻居东土城2店",name:"北京市朝阳区东土城路13号院1号楼",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.438694",location_lat:"39.957714",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},388:{id:"388",shop_no:"286",area_id:"110105",alias:"好邻居财满街店",name:"朝阳区朝阳路69号楼1-1-1（5）号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.542551",location_lat:"39.923212",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},390:{id:"390",shop_no:"284",area_id:"110105",alias:"好邻居麦子西街店",name:"朝阳区枣营北里38号楼一层104",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.475901",location_lat:"39.950494",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},393:{id:"393",shop_no:"293",area_id:"110105",alias:"好邻居广泽果岭店",name:"北京市朝阳区广泽路6号院13号楼",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.485421",location_lat:"40.013152",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},394:{id:"394",shop_no:"503",area_id:"110105",alias:"好邻居广顺北店",name:"北京市朝阳区利泽西园102号楼",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"40.014023",location_lat:"116.475486",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},395:{id:"395",shop_no:"291",area_id:"110105",alias:"好邻居酒仙桥路店",name:"北京市朝阳区酒仙桥路26号院1号楼A05号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.50127",location_lat:"39.972673",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},397:{id:"397",shop_no:"298",area_id:"110105",alias:"好邻居慧忠北路店",name:"北京市朝阳区慧忠北路慧忠里231楼鼓浪屿会所一层底商",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.408649",location_lat:"40.004854",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},401:{id:"401",shop_no:"297",area_id:"110105",alias:"好邻居鼓外黄寺",name:"朝阳区安外黄寺大街3号院",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.403293",location_lat:"39.969729",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},405:{id:"405",shop_no:"303",area_id:"110105",alias:"好邻居外经贸店",name:"朝阳区太阳宫乡芍药居村甲3号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.437723",location_lat:"39.986458",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},410:{id:"410",shop_no:"309",area_id:"110105",alias:"好邻居安苑小关店",name:"朝阳区小关北街43号平房",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.415675",location_lat:"39.987759",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},416:{id:"416",shop_no:"502",area_id:"110105",alias:"光华桥店",name:"朝阳区光华路7号（周一至周五营业）",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.460404",location_lat:"39.919788",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},418:{id:"418",shop_no:"262",area_id:"110105",alias:"百子湾5店",name:"朝阳区百子湾路16号百子园4号楼一层C单元101室",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.490848",location_lat:"39.906404",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},423:{id:"423",shop_no:"332",area_id:"110105",alias:"左家庄店",name:"北京市朝阳区左家庄东里14号楼院",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.960224",location_lat:"116.45108",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},427:{id:"427",shop_no:"343",area_id:"110105",alias:"管庄分店",name:"朝阳区朝阳路管庄西里65号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.918461",location_lat:"116.596154",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},433:{id:"433",shop_no:"388",area_id:"110105",alias:"樱花园东街店",name:"朝阳区樱花园东街1号楼1层1-6",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.91431",location_lat:"116.37832",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},435:{id:"435",shop_no:"386",area_id:"110105",alias:"和平街分店",name:"朝阳区和平街11区甲16楼一层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.975034",location_lat:"116.429374",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},436:{id:"436",shop_no:"387",area_id:"110105",alias:"建外大街分店",name:"朝阳区建外大街乙24号燕华苑N105",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.912587",location_lat:"116.44601",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},439:{id:"439",shop_no:"366",area_id:"110105",alias:"慧忠里洛克时代店",name:"朝阳区慧忠里洛克时代亚奥国际广场D座一层1019号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.407968",location_lat:"40.004823",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""}},110106:{314:{id:"314",shop_no:"839",area_id:"110106",alias:"草桥欣园店",name:"丰台区草桥欣园一区5号楼一层5号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.365107",location_lat:"39.852251",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},319:{id:"319",shop_no:"161",area_id:"110106",alias:"好邻居羊坊店路店",name:"丰台区西客站南路8号南广场往南过红绿灯直行300米路东",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.893183",location_lat:"116.327939",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},349:{id:"349",shop_no:"370",area_id:"110106",alias:"首经贸大学南门店",name:"丰台区首经贸中街8号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.327967",location_lat:"39.846621",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},429:{id:"429",shop_no:"346",area_id:"110106",alias:"好邻居刘家窑南里店",name:"丰台区刘家窑路丰台区刘家窑南里甲一号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.868292",location_lat:"116.423535",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""}},110107:{409:{id:"409",shop_no:"396",area_id:"110107",alias:"八角畅游大厦搜狐店",name:"北京市石景山区搜狐畅游大厦一层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.231304",location_lat:"39.912525",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""}},110108:{1:{id:"1",shop_no:"843",area_id:"110108",alias:"上地鹏寰大厦百度店",name:"海淀区，上地东路一号院鹏寰大厦，好邻居便利店(843)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.308402",location_lat:"40.061414",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},8:{id:"8",shop_no:"263",area_id:"110108",alias:"畅春园美食街店",name:"海淀区，西苑草场5号，好邻居便利店(263)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.3113",location_lat:"39.995205",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},16:{id:"16",shop_no:"125",area_id:"110108",alias:"北三环放光社区店",name:"海淀区，北三环西路60号，好邻居便利店(125)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.326494",location_lat:"39.971958",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},17:{id:"17",shop_no:"183",area_id:"110108",alias:"厂洼武警总部店",name:"海淀区，厂洼小区24号楼北京电视台西门，好邻居便利店(183)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.313109",location_lat:"39.964403",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},18:{id:"18",shop_no:"351",area_id:"110108",alias:"板井路总部店",name:"海淀区，车道沟桥进入板井路单行路直行300米路北，好邻居便利店(351)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.295582",location_lat:"39.955243",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},19:{id:"19",shop_no:"350",area_id:"110108",alias:"大钟寺东路京仪大厦店",name:"海淀区，大钟寺东路京仪大厦底商海淀区大钟寺东路9号1幢1层101-1，好邻居便利店(350)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.344811",location_lat:"39.977391",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},20:{id:"20",shop_no:"169",area_id:"110108",alias:"科南中关村中学店",name:"海淀区，科学院南路55号 中关村中学正对面，好邻居便利店(169)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.331498",location_lat:"39.984315",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},21:{id:"21",shop_no:"561",area_id:"110108",alias:"万泉河好邻居",name:"海淀区，万泉河路68号紫金大厦1层，好邻居便利店(561)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.314524",location_lat:"39.972615",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},22:{id:"22",shop_no:"147",area_id:"110108",alias:"羊坊路京西宾馆店",name:"海淀区，羊坊店路3号，好邻居便利店(147)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.327509",location_lat:"39.911252",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},23:{id:"23",shop_no:"199",area_id:"110108",alias:"永定路航天工业部店",name:"海淀区，永定路63号(武警总医院北200米)，好邻居便利店(199)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.270987",location_lat:"39.918917",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},24:{id:"24",shop_no:"379",area_id:"110108",alias:"科南路搜狐大厦店",name:"海淀区，中关村新科祥园甲2号楼1层03室，好邻居便利店(379)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.33112",location_lat:"39.989367",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},43:{id:"43",shop_no:"296",area_id:"110108",alias:"西直门好邻居",name:"海淀区，西直门北大街47号院2号楼北侧一层，好邻居便利店(296)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.362382",location_lat:"39.953238",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},75:{id:"75",shop_no:"137",area_id:"110108",alias:"增光路紫玉大厦店",name:"海淀区，增光路乙48号，好邻居便利店(137)",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.31828",location_lat:"39.933911",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},258:{id:"258",shop_no:"147",area_id:"110108",alias:"好邻居羊坊路店",name:"海淀区羊坊店路3号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.91126",location_lat:"116.32751",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},264:{id:"264",shop_no:"393",area_id:"110108",alias:"广源大厦店",name:"海淀区广源闸路5-1号广源大厦",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.949622",location_lat:"116.317985",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},266:{id:"266",shop_no:"136",area_id:"110108",alias:"好邻居大慧寺店",name:"海淀区魏公村大慧寺路5号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.957206",location_lat:"116.332228",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},267:{id:"267",shop_no:"395",area_id:"110108",alias:"文慧园北路分店",name:"海淀区红联北村3号楼底商",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.961113",location_lat:"116.367708",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},268:{id:"268",shop_no:"135",area_id:"110108",alias:"好邻居阜成路店",name:"海淀区白堆子立新9号楼前",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.929375",location_lat:"116.333818",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},270:{id:"270",shop_no:"836",area_id:"110108",alias:"中关村医院店",name:"海淀区中关村甲943号楼8-3",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.986589",location_lat:"116.328315",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},272:{id:"272",shop_no:"137",area_id:"110108",alias:"好邻居增光路店",name:"海淀区增光路乙48号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.933911",location_lat:"116.31828",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},276:{id:"276",shop_no:"834",area_id:"110108",alias:"学院南路邮电大学店",name:"海淀区学院南路10号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.963968",location_lat:"116.363862",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},281:{id:"281",shop_no:"849",area_id:"110108",alias:"羊坊店西路什坊院店",name:"海淀区羊坊店西路什坊院一号院6号楼一层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.903697",location_lat:"116.323079",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},283:{id:"283",shop_no:"846",area_id:"110108",alias:"朱房路清河派出所店",name:"海淀区清河朱房路临66号楼3栋10号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"40.033362",location_lat:"116.339848",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},286:{id:"286",shop_no:"810",area_id:"110108",alias:"复兴路军博店",name:"海淀区复兴路12号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.912311",location_lat:"116.330608",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},288:{id:"288",shop_no:"811",area_id:"110108",alias:"交大嘉园店",name:"海淀区交通大学路1号院交大嘉园4号底商",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.955388",location_lat:"116.352506",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},291:{id:"291",shop_no:"813",area_id:"110108",alias:"学清路大华加油站店",name:"海淀区学清路23号院东侧平房4号房间",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"40.016494",location_lat:"116.358192",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},292:{id:"292",shop_no:"199",area_id:"110108",alias:"好邻居永定路店",name:"海淀区永定路63号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.918919",location_lat:"116.270988",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},293:{id:"293",shop_no:"814",area_id:"110108",alias:"木荷路环保园华为店",name:"海淀区木荷路19号院2号楼一楼西厅东侧",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"40.063402",location_lat:"116.191489",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},294:{id:"294",shop_no:"191",area_id:"110108",alias:"好邻居车道沟店",name:"海淀区车道沟西南角嘉豪国际大厦B座大堂内（周一至周六营业）",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.953643",location_lat:"116.298784",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},298:{id:"298",shop_no:"173",area_id:"110108",alias:"好邻居文慧园店",name:"海淀区文慧园路10号，双汇超市对面",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.958261",location_lat:"116.369649",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},305:{id:"305",shop_no:"183",area_id:"110108",alias:"好邻居厂洼路店",name:"海淀区厂洼小区24号楼，北京电视台西门",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.964408",location_lat:"116.31311",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},313:{id:"313",shop_no:"155",area_id:"110108",alias:"好邻居索家坟店",name:"海淀区积水潭桥往西400米,远洋风景往北300米路东",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.956995",location_lat:"116.365342",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},315:{id:"315",shop_no:"838",area_id:"110108",alias:"中关村小学店",name:"海淀区中关村新科祥园2号楼",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.329841",location_lat:"39.989263",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},317:{id:"317",shop_no:"383",area_id:"110108",alias:"学府树家园店",name:"海淀区学府树家园3号楼3-1号3-12号1层3-6",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.341163",location_lat:"40.039874",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},320:{id:"320",shop_no:"163",area_id:"110108",alias:"好邻居北洼路东店",name:"海淀区北洼路42号院大门北侧，首都师大附中东门对面。",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.936299",location_lat:"116.308095",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},324:{id:"324",shop_no:"379",area_id:"110108",alias:"科南路搜狐大厦店",name:"海淀区中关村新科祥园甲2号楼1层03室",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.33112",location_lat:"39.989367",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},325:{id:"325",shop_no:"227",area_id:"110108",alias:"好邻居白堆子店",name:"海淀区阜成路23号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.322976",location_lat:"39.93062",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},326:{id:"326",shop_no:"164",area_id:"110108",alias:"好邻居交大东路店",name:"海淀区北下关广通苑小区四号楼一层，嘉世堂药店旁",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.951798",location_lat:"116.356048",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},328:{id:"328",shop_no:"169",area_id:"110108",alias:"好邻居科学院南路店",name:"海淀区科学院南路55号，中关村中学正对面",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.984316",location_lat:"116.331498",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},330:{id:"330",shop_no:"377",area_id:"110108",alias:"学院南路师范大学店",name:"海淀区（市容监督所东侧）学院南路1号楼1层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.37202",location_lat:"39.963739",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},331:{id:"331",shop_no:"174",area_id:"110108",alias:"好邻居诚品建筑店",name:"海淀区诚品建筑云慧里远流清园小区4号四季青桥东南角",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.952221",location_lat:"116.287734",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},333:{id:"333",shop_no:"502",area_id:"110108",alias:"好邻居海淀南路店",name:"海淀区通惠寺3号七一棉织厂东一楼东侧",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.485421",location_lat:"40.013152",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},338:{id:"338",shop_no:"374",area_id:"110108",alias:"复兴路翠微大厦店",name:"北京市海淀区复兴路甲18号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.310688",location_lat:"39.913175",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},347:{id:"347",shop_no:"371",area_id:"110108",alias:"西三环北路花园桥店",name:"北京市海淀区西三环北路91号7号楼国图大厦一层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.315945",location_lat:"39.939575",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},348:{id:"348",shop_no:"320",area_id:"110108",alias:"好邻居学知轩店",name:"海淀区学清路16号学知轩一层西侧106号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.359619",location_lat:"40.018185",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},353:{id:"353",shop_no:"244",area_id:"110108",alias:"好邻居蓟门里店",name:"海淀区蓟门里小区北商业楼1幢号平房",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.357564",location_lat:"39.976246",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},357:{id:"357",shop_no:"351",area_id:"110108",alias:"好邻居板井店",name:"海淀区板井村60号南29号平房-9",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.955163",location_lat:"116.295331",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},371:{id:"371",shop_no:"214",area_id:"110108",alias:"好邻居魏公村店",name:"海淀区中关村南大街18号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.960411",location_lat:"116.330573",deleted:!1,can_remark_address:!1,child_area_id:null,account:null,account_name:null},376:{id:"376",shop_no:"278",area_id:"110108",alias:"好邻居人大店",name:"北京市海淀区中关村南大街1号院",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.327008",location_lat:"39.974144",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},380:{id:"380",shop_no:"272",area_id:"110108",alias:"好邻居马甸桥店",name:"北京市海淀区北太平庄邮信宿舍9门",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.383046",location_lat:"39.975784",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},381:{id:"381",shop_no:"263",area_id:"110108",alias:"好邻居畅春园店",name:"北京市海淀区西苑草场5号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.311304",location_lat:"39.995206",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},384:{id:"384",shop_no:"279",area_id:"110108",alias:"好邻居理工大学店",name:"北京市海淀区中关村南大街5号102",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.329293",
location_lat:"39.96435",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},386:{id:"386",shop_no:"344",area_id:"110108",alias:"好邻居皂君庙店",name:"海淀区皂君庙大钟寺派出所正对面海淀区皂君庙14号院一号楼1层101室",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.343776",location_lat:"39.966212",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},389:{id:"389",shop_no:"285",area_id:"110108",alias:"好邻居苏州街工商店",name:"北京市海淀区苏州街49号一楼北侧111号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.312813",location_lat:"39.979466",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},392:{id:"392",shop_no:"292",area_id:"110108",alias:"好邻居花园路店",name:"北京市海淀区花园路C2号南1号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.372463",location_lat:"39.986685",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},396:{id:"396",shop_no:"296",area_id:"110108",alias:"好邻居西直门北店",name:"北京市海淀区西直门北大街47号院2号楼北侧一层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.95324",location_lat:"116.362383",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},400:{id:"400",shop_no:"314",area_id:"110108",alias:"好邻居学清农大店",name:"北京市海淀区农大东校区B105",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.361065",location_lat:"40.011608",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},407:{id:"407",shop_no:"307",area_id:"110108",alias:"好邻居工商东校区店",name:"海淀区阜成路11号院高层学生公寓对面新建平房",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.326385",location_lat:"39.931696",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},412:{id:"412",shop_no:"313",area_id:"110108",alias:"好邻居北太平庄西店",name:"北太平庄路25号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.376216",location_lat:"39.978622",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},413:{id:"413",shop_no:"315",area_id:"110108",alias:"好邻居学院南路店",name:"海淀区大柳树路2号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.349387",location_lat:"39.963509",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},421:{id:"421",shop_no:"125",area_id:"110108",alias:"北三环店",name:"海淀区北三环西路60号",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"116.32179",location_lat:"39.970257",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},425:{id:"425",shop_no:"334",area_id:"110108",alias:"苏州街五分店",name:"海淀区苏州街工商局一层苏州街工商店对面偏南",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.978948",location_lat:"116.313501",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},426:{id:"426",shop_no:"341",area_id:"110108",alias:"四道口路二分店",name:"北京市海淀区四道口路净土寺32号东区41幢一层北部",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.955064",location_lat:"116.355083",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},431:{id:"431",shop_no:"348",area_id:"110108",alias:"好邻居清华东三",name:"海淀区农业大学南门东200米路北海淀区清华东路11号2号幢一层西侧",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"40.007298",location_lat:"116.366127",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},432:{id:"432",shop_no:"350",area_id:"110108",alias:"好邻居大钟寺东路",name:"海淀区大钟寺东路京仪大厦底商海淀区大钟寺东路9号1幢1层101-1",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.977196",location_lat:"116.344837",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""},437:{id:"437",shop_no:"228",area_id:"110108",alias:"好邻居航北",name:"海淀区西三环中路88号（航天桥东北角辅路）华夏一层",type:"0",owner_name:"",owner_phone:"4000-508-528",location_long:"39.932134",location_lat:"116.31704",deleted:!1,can_remark_address:!1,child_area_id:null,account:"",account_name:""}}},$vm.changeOfflineStoreArea=changeOfflineStoreArea,$vm.showOfflineStoreDetail=showOfflineStoreDetail,$vm.chooseOfflineStore=chooseOfflineStore,$vm.showChooseOfflineStore=showChooseOfflineStore}return{ChooseOfflineStore:ChooseOfflineStore}}angular.module("module.services").service("OfflineStore",OfflineStore)}(window,window.angular),function(window,angular,wx){function WesharesEditCtrl($scope,$rootScope,$log,$http,wx,Utils,staticFilePath){function setDefaultShipSettingData(){vm.self_ziti_data={status:1,ship_fee:0,tag:"self_ziti"},vm.kuai_di_data={status:-1,ship_fee:"",tag:"kuai_di"},vm.pys_ziti_data={status:-1,ship_fee:0,tag:"pys_ziti"},vm.pin_tuan_data={status:-1,ship_fee:500,tag:"pin_tuan"}}function setDefaultProxyRebatePercent(){vm.proxy_rebate_percent={status:0,percent:0}}function setDefaultDeliveryTemplate(){vm.defaultDeliveryTemplate={start_units:1,start_fee:0,add_units:1,add_fee:0,is_default:1}}function setDeliveryTemplates(){vm.deliveryTemplates=[]}function removeDeliveryTemplate(deliveryTemplate){vm.deliveryTemplates=_.without(vm.deliveryTemplates,deliveryTemplate)}function addDeliveryTemplate(){vm.deliveryTemplates.push({start_units:1,start_fee:0,add_units:1,add_fee:0,is_default:0})}function activate(){function setDefaultData(){vm.weshare.addresses&&0!=vm.weshare.addresses.length||(vm.weshare.addresses=[{address:"",deleted:0,name:"",phone:""}]),vm.weshare.send_info||(vm.weshare.send_info="")}vm.initCityData(),vm.resetProvinceAreaCheckStatus(),vm.showEditShareInfo=!0,vm.showShippmentInfo=!1,vm.deliveryTemplateType=0,vm.setDefaultDeliveryTemplate(),vm.setDeliveryTemplates();var weshareId=angular.element(document.getElementById("weshareEditView")).attr("data-id"),sharerShipType=angular.element(document.getElementById("weshareEditView")).attr("data-ship-type"),userId=angular.element(document.getElementById("weshareEditView")).attr("data-user-id"),canUseOfflineAddress=angular.element(document.getElementById("weshareEditView")).attr("data-can-user-offline-address");if(vm.currentUserId=userId,vm.sharerShipType=sharerShipType,vm.canUseOfflineAddress=canUseOfflineAddress,vm.canUseOfflineAddress||(vm.showCreateShareTipInfo=!0,vm.showLayer=!0),weshareId)$http.get("/weshares/get_share_info/"+weshareId).success(function(data){vm.weshare=data,vm.weshare.tags=vm.weshare.tags_list,setDefaultData(),setDefaultShipSettingData(),setDefaultProxyRebatePercent(),data.ship_type.self_ziti&&(vm.self_ziti_data=data.ship_type.self_ziti),data.ship_type.kuai_di&&(vm.kuai_di_data=data.ship_type.kuai_di),data.ship_type.pys_ziti&&(vm.pys_ziti_data=data.ship_type.pys_ziti),data.ship_type.pin_tuan&&(vm.pin_tuan_data=data.ship_type.pin_tuan),vm.kuaidi_show_ship_fee=vm.kuai_di_data.ship_fee/100,data.proxy_rebate_percent&&(vm.proxy_rebate_percent=data.proxy_rebate_percent),_.isEmpty(data.deliveryTemplate.delivery_templates)||(vm.deliveryTemplates=data.deliveryTemplate.delivery_templates),_.isEmpty(data.deliveryTemplate.default_delivery_template)||(vm.defaultDeliveryTemplate=data.deliveryTemplate.default_delivery_template,vm.defaultDeliveryTemplate.is_default=1,vm.deliveryTemplateType=vm.defaultDeliveryTemplate.unit_type),$rootScope.loadingPage=!1}).error(function(data){$rootScope.loadingPage=!1});else{$scope.$watchCollection("vm.weshare",vm.saveCacheData),setDefaultShipSettingData(),setDefaultProxyRebatePercent(),vm.kuaidi_show_ship_fee="",vm.weshare={title:"",description:"",images:[],products:[{name:"",store:"",tbd:0,tag_id:"0",deleted:0,weight:""}],send_info:"",addresses:[{address:"",deleted:0,name:"",phone:""}]};var $cacheData=PYS.storage.load(vm.dataCacheKey);$cacheData?$cacheData.id||(vm.weshare=$cacheData):PYS.storage.save(vm.dataCacheKey,{},1),setDefaultData(),$rootScope.loadingPage=!1}vm.messages=[],setWxParams()}function getUnitTypeText(){return 0==vm.deliveryTemplateType?"件":1==vm.deliveryTemplateType?"kg":void 0}function chooseAndUploadImage(){wx.chooseImage({success:function(res){vm.uploadImage(res.localIds)},fail:function(res){vm.messages.push({name:"choose image failed",detail:res})}})}function saveCacheData(){PYS.storage.save(vm.dataCacheKey,vm.weshare,1)}function uploadImage(localIds){function upload(){wx.uploadImage({localId:localIds[i],isShowProgressTips:1,success:function(res){i++,$http.get("/downloads/download_wx_img?media_id="+res.serverId).success(function(data,status,headers,config){vm.messages.push({name:"download image success",detail:data});var imageUrl=data.download_url;imageUrl&&"false"!=imageUrl&&vm.weshare.images.push(imageUrl)}).error(function(data){vm.messages.push({name:"download image failed",detail:data})}),len>i&&upload()},fail:function(res){vm.messages.push({name:"upload image failed",detail:res})}})}var i=0,len=localIds.length;upload()}function deleteImage(image){vm.weshare.images=_.without(vm.weshare.images,image)}function toggleProduct(product,add){add?vm.weshare.products.push({name:"",store:"",deleted:0,weight:""}):product.id&&product.id>0?product.deleted=1:vm.weshare.products=_.without(vm.weshare.products,product)}function deleteAddress(address){address.id&&address.id>0?address.deleted=1:vm.weshare.addresses=_.without(vm.weshare.addresses,address)}function addAddress(){vm.weshare.addresses.push({address:"",deleted:0,name:"",phone:""})}function backStep(){vm.showShippmentInfo=!1,vm.showEditShareInfo=!0}function nextStep(){var titleHasError=vm.validateTitle(),productHasError=!1;_.each(vm.weshare.products,function(product){var nameHasError=vm.validateProductName(product),priceHasError=vm.validateProductPrice(product);productHasError=productHasError||nameHasError||priceHasError}),titleHasError||productHasError||(vm.showShippmentInfo=!0,vm.showEditShareInfo=!1)}function saveWeshare(){if(vm.weshare.addresses=_.filter(vm.weshare.addresses,function(address){return!_.isEmpty(address.address)}),vm.kuai_di_data.ship_fee=vm.kuai_di_data.ship_fee||0,vm.weshare.ship_type=[vm.self_ziti_data,vm.kuai_di_data,vm.pys_ziti_data,vm.pin_tuan_data],!validateShipSetting(vm.weshare.ship_type))return alert("至少选择一种物流方式"),resetZitiAddressData(),!1;if(vm.validateAddress())return resetZitiAddressData(),alert("请输入完整自提地址信息"),!1;var deliveryTemplates=vm.deliveryTemplates.concat(vm.defaultDeliveryTemplate);return vm.validateShipFee(vm.kuai_di_data.ship_fee)?!1:vm.validateRebatePercent()?(alert("请设置团长佣金比例"),!1):vm.validateSendInfo()?(alert("输入到货/发货时间"),!1):vm.validatePinTuan()?!1:vm.validateDeliveryTemplateData(deliveryTemplates)?(deliveryTemplates=_.map(deliveryTemplates,function(item){return item.unit_type=vm.deliveryTemplateType,item}),vm.isInProcess?void alert("正在保存...."):(vm.isInProcess=!0,vm.weshare.proxy_rebate_percent=vm.proxy_rebate_percent,vm.weshare.delivery_templates=deliveryTemplates,void $http.post("/weshares/save",vm.weshare).success(function(data){data.success?(PYS.storage.clear(),window.location.href="/weshares/view/"+data.id):window.location.href="/weshares/user_share_info/"}).error(function(){window.location.href="/weshares/add"}))):!1}function toggleAreaProvinceCheckStatus(areaId){var areaCheckStatus=vm.areaCheckStatus[areaId];_.each(vm.provinceData[areaId],function(_,key){vm.provinceCheckStatus[key]=areaCheckStatus})}function hideChooseCityView(){vm.isShowChooseCity=!1,vm.showShippmentInfo=!0}function validateShipFee(){return Utils.isNumber(vm.kuaidi_show_ship_fee)&&(vm.kuai_di_data.ship_fee=100*vm.kuaidi_show_ship_fee),Utils.isNumber(vm.kuai_di_data.ship_fee)||1!=vm.kuai_di_data.status?vm.shipFeeHasError=!1:vm.shipFeeHasError=!0,vm.shipFeeHasError}function validateTitle(){return vm.weshareTitleHasError=_.isEmpty(vm.weshare.title)||vm.weshare.title.length>128,vm.weshareTitleHasError}function validateSendInfo(){return vm.weshareSendInfoHasError=_.isEmpty(vm.weshare.send_info)||vm.weshare.send_info.length>68,vm.weshareSendInfoHasError}function validatePinTuan(){return vm.pinTuanHasError=!1,1==vm.pin_tuan_data.status&&vm.pin_tuan_data.limit<=0&&(vm.pinTuanHasError=!0),vm.pinTuanHasError}function validateProductName(product){return product.nameHasError=_.isEmpty(product.name)||product.name.length>40,product.nameHasError}function alertProductWeight(product){return product.weightHasWarning=Utils.isNumber(product.weight)&&product.weight>25,product.weightHasWarning}function validateProductPrice(product){return product.priceHasError=!product.price||!Utils.isNumber(product.price),product.priceHasError}function validateAddress(){if(-1==vm.self_ziti_data.status)return vm.addressError=!1,vm.addressError;if(vm.addressError=1==vm.self_ziti_data.status&&_.isEmpty(vm.weshare.addresses),!vm.addressError){var tempAddressError=!1;_.each(vm.weshare.addresses,function(address){tempAddressError=tempAddressError||_.isEmpty(address.address)||_.isEmpty(address.name)||_.isEmpty(address.phone)}),vm.addressError=vm.addressError||tempAddressError}return vm.addressError}function showDeliveryTemplateProvinceNames(deliveryTemplate){if(!_.isEmpty(deliveryTemplate.regions)){var nameStr=_.reduce(deliveryTemplate.regions,function(memo,checkedProvince){return checkedProvince.province_name+","+memo},"");return nameStr}return"选择地区"}function deliveryTemplateChooseCity(){vm.hideChooseCityView(),vm.currentDeliveryTemplate.regions=[];var checkedProvinces=_.map(vm.provinceCheckStatus,function(checked,provinceId){return checked?provinceId:void 0});checkedProvinces=_.filter(checkedProvinces,function(provinceId){return provinceId});var checkedProvinceData=_.map(checkedProvinces,function(provinceId){return{province_id:provinceId,province_name:vm.provinceIdNameMap[provinceId]}});vm.currentDeliveryTemplate.regions=checkedProvinceData}function resetProvinceAreaCheckStatus(){vm.areaCheckStatus={1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1},vm.provinceCheckStatus={310100:!1,320000:!1,330000:!1,340000:!1,360000:!1,110100:!1,120100:!1,130000:!1,140000:!1,150000:!1,370000:!1,410000:!1,420000:!1,430000:!1,350000:!1,440000:!1,450000:!1,460000:!1,210000:!1,220000:!1,230000:!1,610000:!1,620000:!1,630000:!1,640000:!1,650000:!1,500100:!1,510000:!1,520000:!1,530000:!1,540000:!1,710000:!1,810000:!1,820000:!1}}function initCityData(){vm.areaData=[{name:"华东",id:"1",showChild:!1},{name:"华北",id:"2",showChild:!1},{name:"华中",id:"3",showChild:!1},{name:"华南",id:"4",showChild:!1},{name:"东北",id:"5",showChild:!1},{name:"西北",id:"6",showChild:!1},{name:"西南",id:"7",showChild:!1},{name:"港澳台",id:"8",showChild:!1}],vm.provinceIdNameMap={310100:"上海",320000:"江苏",330000:"浙江",340000:"安徽",360000:"江西",110100:"北京",120100:"天津",130000:"河北",140000:"山西",150000:"内蒙古",370000:"山东",410000:"河南",420000:"湖北",430000:"湖南",350000:"福建",440000:"广东",450000:"广西",460000:"海南",210000:"辽宁",220000:"吉林",230000:"黑龙江",610000:"陕西",620000:"甘肃",630000:"青海",640000:"宁夏",650000:"新疆",500100:"重庆",510000:"四川",520000:"贵州",530000:"云南",540000:"西藏",710000:"台湾",810000:"香港",820000:"澳门"},vm.areaIds=["1","2","3","4","5","6","7","8"],vm.provinceData={1:{310100:"上海",320000:"江苏",330000:"浙江",340000:"安徽",360000:"江西"},2:{110100:"北京",120100:"天津",130000:"河北",140000:"山西",150000:"内蒙古",370000:"山东"},3:{410000:"河南",420000:"湖北",430000:"湖南"},4:{350000:"福建",440000:"广东",450000:"广西",460000:"海南"},5:{210000:"辽宁",220000:"吉林",230000:"黑龙江"},6:{610000:"陕西",620000:"甘肃",630000:"青海",640000:"宁夏",650000:"新疆"},7:{500100:"重庆",510000:"四川",520000:"贵州",530000:"云南",540000:"西藏"},8:{710000:"台湾",810000:"香港",820000:"澳门"}}}function setAreaCheckStatus(areaId){var areaChildProvinces=vm.provinceData[areaId],provinceIds=_.keys(areaChildProvinces),checkStatusResult=_.reduce(provinceIds,function(memo,provinceId){return memo&&vm.provinceCheckStatus[provinceId]},!0);vm.areaCheckStatus[areaId]=checkStatusResult}function showChooseCityView(deliveryTemplate){vm.resetProvinceAreaCheckStatus(),vm.isShowChooseCity=!0,vm.showShippmentInfo=!1,vm.currentDeliveryTemplate=deliveryTemplate;var regions=deliveryTemplate.regions;_.each(regions,function(item){vm.provinceCheckStatus[item.province_id]=!0}),_.each(vm.areaIds,function(areaId){vm.setAreaCheckStatus(areaId)})}function validateDeliveryTemplateData(deliveryTemplates){for(var i=0;i<deliveryTemplates.length;i++){var deliveryTemplateItem=deliveryTemplates[i];if(Utils.isBlank(deliveryTemplateItem.start_units)&&(deliveryTemplateItem.start_units=1),Utils.isBlank(deliveryTemplateItem.start_fee)&&(deliveryTemplateItem.start_fee=0),Utils.isBlank(deliveryTemplateItem.add_units)&&(deliveryTemplateItem.add_units=1),Utils.isBlank(deliveryTemplateItem.add_fee)&&(deliveryTemplateItem.add_fee=0),0==deliveryTemplateItem.is_default&&_.isEmpty(deliveryTemplateItem.regions))return alert("非默认运费设置，需要指定地区"),!1;if(!(Utils.isNumber(deliveryTemplateItem.start_units)&&Utils.isNumber(deliveryTemplateItem.start_fee)&&Utils.isNumber(deliveryTemplateItem.add_units)&&Utils.isNumber(deliveryTemplateItem.add_fee)))return alert("运费设置需要输入数字"),!1;if(deliveryTemplateItem.start_units<1||deliveryTemplateItem.add_units<1)return alert("运费设置商品件数必须大于1"),!1}return!0}function validateRebatePercent(){return Utils.isNumber(vm.proxy_rebate_percent.percent)?vm.rebatePercentHasError=!1:vm.rebatePercentHasError=!0,vm.rebatePercentHasError}function validateShipSetting($settings){var hasOne=_.find($settings,function(item){return 1==item.status});return!!hasOne}function resetZitiAddressData(){_.isEmpty(vm.weshare.addresses)&&(vm.weshare.addresses=[{address:"",deleted:0,name:"",phone:""}])}function toggleBoxZitiChecked(){1==vm.self_ziti_data.status?vm.self_ziti_data.status=-1:vm.self_ziti_data.status=1}function toggleBoxKuidiChecked(){1==vm.kuai_di_data.status?vm.kuai_di_data.status=-1:vm.kuai_di_data.status=1}function setWxParams(){wx&&wx.ready(function(){var to_timeline_title="朋友说—基于信任关系的分享平台",to_friend_title="朋友说—基于信任关系的分享平台",to_friend_link=document.URL.split("?")[0],to_timeline_link=document.URL.split("?")[0],imgUrl="http://static.tongshijia.com/static/weshares/images/pys-logo.gif",desc="来 [朋友说] 分享好吃的、好玩的、有趣的";wx.onMenuShareAppMessage({title:to_friend_title,desc:desc,link:to_friend_link,imgUrl:imgUrl,success:function(){}}),wx.onMenuShareTimeline({title:to_timeline_title,link:to_timeline_link,imgUrl:imgUrl,success:function(){}})})}var vm=this;vm.staticFilePath=staticFilePath,vm.chooseAndUploadImage=chooseAndUploadImage,vm.uploadImage=uploadImage,vm.deleteImage=deleteImage,vm.toggleProduct=toggleProduct,vm.addAddress=addAddress,vm.nextStep=nextStep,vm.backStep=backStep,vm.saveWeshare=saveWeshare,vm.validateTitle=validateTitle,vm.validateProductName=validateProductName,vm.validateProductPrice=validateProductPrice,vm.alertProductWeight=alertProductWeight,vm.validateAddress=validateAddress,vm.saveCacheData=saveCacheData,vm.validateShipFee=validateShipFee,vm.validateRebatePercent=validateRebatePercent,vm.dataCacheKey="cache_share_data",vm.validateSendInfo=validateSendInfo,vm.validatePinTuan=validatePinTuan,vm.showChooseCityView=showChooseCityView,vm.hideChooseCityView=hideChooseCityView,vm.initCityData=initCityData,vm.toggleAreaProvinceCheckStatus=toggleAreaProvinceCheckStatus,vm.setDefaultShipSettingData=setDefaultShipSettingData,vm.setDefaultProxyRebatePercent=setDefaultProxyRebatePercent,vm.setDefaultDeliveryTemplate=setDefaultDeliveryTemplate,vm.setDeliveryTemplates=setDeliveryTemplates,vm.removeDeliveryTemplate=removeDeliveryTemplate,vm.addDeliveryTemplate=addDeliveryTemplate,vm.deliveryTemplateChooseCity=deliveryTemplateChooseCity,vm.resetProvinceAreaCheckStatus=resetProvinceAreaCheckStatus,vm.showDeliveryTemplateProvinceNames=showDeliveryTemplateProvinceNames,vm.setAreaCheckStatus=setAreaCheckStatus,vm.validateDeliveryTemplateData=validateDeliveryTemplateData,vm.toggleBoxZitiChecked=toggleBoxZitiChecked,vm.toggleBoxKuidiChecked=toggleBoxKuidiChecked,vm.deleteAddress=deleteAddress,vm.getUnitTypeText=getUnitTypeText,vm.showEditShareView=!0,vm.currentDeliveryTemplate=null,activate()}angular.module("weshares").constant("wx",wx).controller("WesharesEditCtrl",WesharesEditCtrl)}(window,window.angular,window.wx),function(window,angular){function WesharesConsigneeCtrl($scope,CoreReactorChannel){function active(){vm.selectShipType=getSelectTypeDefaultVal(),wcc.availableShipTypes=Math.max(_.filter(["kuai_di","self_ziti","pys_ziti"],function(item){return vm.weshareSettings[item]&&1==vm.weshareSettings[item].status}).length,1),vm.shouldInitUserConsigneeData&&(initUserConsigneeData(),vm.calOrderTotalPrice(),vm.shouldInitUserConsigneeData=!1)}function changeShipTab(type){vm.selectShipType=type,vm.updateBuyerData(type)}function toEditConsigneeView(){vm.showBalanceView=!1,vm.showEditConsigneeView=!0,CoreReactorChannel.elevatedEvent("EditConsignee",{})}function initUserConsigneeData(){_.each(vm.consignee,function(item){0==item.type&&(vm.expressShipInfo=item),1==item.type&&(vm.pickUpShipInfo=item),2==item.type&&(vm.checkedOfflineStore=item.offlineStore,vm.offlineStoreShipInfo=item)}),vm.updateBuyerData(vm.selectShipType)}function getSelectTypeDefaultVal(){return vm.selectShipType?vm.selectShipType:vm.weshareSettings.kuai_di&&1==vm.weshareSettings.kuai_di.status?0:vm.weshareSettings.self_ziti&&1==vm.weshareSettings.self_ziti.status?(vm.shipFee=vm.weshareSettings.self_ziti.ship_fee,1):vm.weshareSettings.pys_ziti&&1==vm.weshareSettings.pys_ziti.status?(vm.shipFee=vm.weshareSettings.pys_ziti.ship_fee,2):-1}var wcc=this;wcc.changeShipTab=changeShipTab,wcc.toEditConsigneeView=toEditConsigneeView;var vm=$scope.$parent.vm;active()}angular.module("weshares").controller("WesharesConsigneeCtrl",WesharesConsigneeCtrl)}(window,window.angular),function(window,angular){function WesharesEditConsigneeCtrl($scope,$http,CoreReactorChannel,$templateCache,Utils){function active(){CoreReactorChannel.onElevatedEvent($scope,"EditConsignee",function(){vmc.showConsigneeListView()})}function showLoading(){vmc.loadingConsignee=!0,vmc.showLayerBg=!0}function closeLoading(){vmc.loadingConsignee=!1,vmc.showLayerBg=!1}function validConsignee(){return Utils.isMobileValid(vmc.editConsigneeData.mobilephone)?_.isEmpty(vmc.editConsigneeData.name)?(alert("请输入收货人"),!1):_.isEmpty(vmc.editConsigneeData.address)?(alert("请输入收货地址"),!1):_.isEmpty(vmc.editConsigneeData.province_id)||_.isEmpty(vmc.editConsigneeData.city_id)?(alert("请选择省市区"),!1):!0:(alert("请输入手机号码"),!1)}function saveConsignee(){return validConsignee()?(vmc.submiting=!0,showLoading(),void $http.post("/users/save_consignee.json",vmc.editConsigneeData).success(function(data){data.success&&(vm.reloadConsigneeData=!0,vm.expressShipInfo=data.consignee,vmc.toBalanceView(),vmc.submiting=!1,closeLoading())}).error(function(){vmc.submiting=!1,closeLoading(),alert("保存失败，请联系客服！")})):!1}function chooseConsignee(consignee){if(1==consignee.status)return void vmc.toBalanceView();var consigneeId=consignee.id;vmc.submiting=!0,showLoading(),$http({method:"GET",url:"/users/select_consignee/"+consigneeId+".json"}).success(function(data){if(vmc.submiting=!1,data.success){var consignees=_.map(vmc.consignees,function(item){return item.id==consigneeId?item.status=1:item.status=0,item});vmc.consignees=_.sortBy(consignees,function(item){return 1==item.status?0:1}),closeLoading(),vm.expressShipInfo=consignee,vmc.toBalanceView()}}).error(function(){vmc.submiting=!1,closeLoading(),alert("请重试！")})}function loadConsignees(){!vm.reloadConsigneeData&&vmc.consignees||(vm.reloadConsigneeData=!0,vmc.consignees=null,showLoading(),$http({method:"GET",url:"/users/get_consignee_list.json"}).success(function(data){var consignees=data.consignees;if(!_.isEmpty(consignees)){var default_item=0;consignees.map(function(item){1==item.status&&default_item++}),default_item>1&&(consignees.map(function(item){item.status=0}),consignees[0].status=1),consignees=_.sortBy(consignees,function(item){return 1==item.status?0:1})}vmc.consignees=consignees,vm.reloadConsigneeData=!1,closeLoading()}).error(function(){closeLoading(),vm.reloadConsigneeData=!0}))}function toBalanceView(){vm.updateBuyerData(vm.selectShipType),vm.showBalanceView=!0,vmc.selectConsignees=!1,vmc.editConsignee=!1}function showConsigneeFormView(data){vmc.selectConsignees=!1,vmc.editConsignee=!0,vmc.editConsigneeData=null,data&&(vmc.editConsigneeData=data),initAreaData()}function initAreaData(){vmc.editConsigneeData&&(vmc.editConsigneeData.city_id&&vmc.loadCityData(vmc.editConsigneeData.province_id),vmc.editConsigneeData.county_id&&vmc.loadCountyData(vmc.editConsigneeData.city_id))}function showConsigneeListView(){loadConsignees(),vmc.selectConsignees=!0,vmc.editConsignee=!1}function initProvince(){vmc.provinceData=[{id:"110100",name:"北京",parent_id:"2"},{id:"120100",name:"天津",parent_id:"2"},{id:"130000",name:"河北",parent_id:"2"},{id:"140000",name:"山西",parent_id:"2"},{id:"150000",name:"内蒙古",parent_id:"2"},{id:"210000",name:"辽宁",parent_id:"5"},{id:"220000",name:"吉林",parent_id:"5"},{id:"230000",name:"黑龙江",parent_id:"5"},{id:"310100",name:"上海",parent_id:"1"},{id:"320000",name:"江苏",parent_id:"1"},{id:"330000",name:"浙江",parent_id:"1"},{id:"340000",name:"安徽",parent_id:"1"},{id:"350000",name:"福建",parent_id:"4"},{id:"360000",name:"江西",parent_id:"1"},{id:"370000",name:"山东",parent_id:"2"},{id:"410000",name:"河南",parent_id:"3"},{id:"420000",name:"湖北",parent_id:"3"},{id:"430000",name:"湖南",parent_id:"3"},{id:"440000",name:"广东",parent_id:"4"},{id:"450000",name:"广西",parent_id:"4"},{id:"460000",name:"海南",parent_id:"4"},{id:"500100",name:"重庆",parent_id:"7"},{id:"510000",name:"四川",parent_id:"7"},{id:"520000",name:"贵州",parent_id:"7"},{id:"530000",name:"云南",parent_id:"7"},{id:"540000",name:"西藏",parent_id:"7"},{id:"610000",name:"陕西",parent_id:"6"},{id:"620000",name:"甘肃",parent_id:"6"},{id:"630000",name:"青海",parent_id:"6"},{id:"640000",name:"宁夏",parent_id:"6"},{id:"650000",name:"新疆",parent_id:"6"},{id:"710000",name:"台湾",parent_id:"8"},{id:"810000",name:"香港",parent_id:"8"},{id:"820000",name:"澳门",parent_id:"8"}]}function loadCityData(provinceId){$http({method:"GET",url:"/locations/get_city.json?provinceId="+provinceId,cache:$templateCache}).success(function(data){vmc.cityData=data}).error(function(data,status){})}function loadCounty(cityId){$http({method:"GET",url:"/locations/get_county.json?cityId="+cityId,cache:$templateCache}).success(function(data){vmc.countyData=data}).error(function(data,status){})}var vmc=this;vmc.selectConsignees=!1,vmc.editConsignee=!1,vmc.showConsigneeFormView=showConsigneeFormView,vmc.showConsigneeListView=showConsigneeListView,vmc.toBalanceView=toBalanceView,vmc.initProvince=initProvince,vmc.loadCityData=loadCityData,vmc.loadCountyData=loadCounty,vmc.saveConsignee=saveConsignee,vmc.chooseConsignee=chooseConsignee,vmc.validConsignee=validConsignee,vmc.initProvince(),vmc.loadingConsignee=!1,vmc.submiting=!1,vmc.showLayerBg=!1;var vm=$scope.$parent.vm;active()}angular.module("weshares").controller("WesharesEditConsigneeCtrl",WesharesEditConsigneeCtrl)}(window,window.angular),function(window,angular){function WesharesViewCtrl($scope,$rootScope,$log,$http,$templateCache,$timeout,$filter,$window,Utils,staticFilePath,shipTypes,ShareOrder,OfflineStore,$timeout){function activate(){vm.initWeshareData()}function filterProductByNum(product){return product.num>0}function getDate(strDate){var date=eval("new Date("+strDate.replace(/\d+(?=-[^-]+$)/,function(a){return parseInt(a,10)-1}).match(/\d+/g)+")");return date}function getFormatDate(dateStr){var date=getDate(dateStr),formatedDate=$filter("date")(date,"MM-dd HH:mm");return formatedDate}function chatToUser(userId){return userId==vm.currentUser.id?void(window.location.href="/share_faq/faq_list/"+vm.weshare.id+"/"+userId):void(window.location.href="/share_faq/faq/"+vm.weshare.id+"/"+userId)}function loadOrderDetail(share_id){var fromType=angular.element(document.getElementById("weshareView")).attr("data-from-type"),initSharedOfferId=angular.element(document.getElementById("weshareView")).attr("data-shared-offer"),followSharedType=angular.element(document.getElementById("sharedOfferResult")).attr("data-shared-type"),followSharedNum=angular.element(document.getElementById("sharedOfferResult")).attr("data-shared-coupon-num");vm.sharedOfferId=initSharedOfferId,initSharedOfferId&&(vm.isSharePacket=!0),$http({method:"GET",url:"/weshares/get_share_user_order/"+share_id+".json",cache:$templateCache}).success(function(data,status){vm.ordersDetail=data.ordersDetail,setWeiXinShareParams(),vm.autoPopCommentData.comment_order_info?vm.showAutoCommentDialog():(1==fromType&&(vm.showLayer=!0,_.isEmpty(initSharedOfferId)?vm.userSubStatus?vm.showNotifyShareDialog=!0:vm.showTipSubSharerDialog=!0:vm.currentUser&&(vm.showNotifyShareOfferDialog=!0,vm.sharedOfferMsg="恭喜发财，大吉大利！")),followSharedType&&"got"==followSharedType&&(vm.showNotifyGetPacketDialog=!0,vm.getPacketNum=followSharedNum+"元",vm.showLayer=!0,$timeout(function(){vm.showLayer=!1,vm.showNotifyGetPacketDialog=!1},1e4))),vm.shareOrder=new ShareOrder,vm.shareOrder.shareId=share_id}).error(function(data,status){$log.log(data)})}function getShareSummeryData(shareId,userId){$http({method:"GET",url:"/weshares/get_share_summery_data/"+shareId+"/"+userId+".json",cache:$templateCache}).success(function(data,status){vm.totalBuyCount=data.order,vm.totalCommentCount=data.comment}).error(function(data,status){})}function initWeshareData(){var rebateLogId=angular.element(document.getElementById("weshareView")).attr("data-rebate-log-id"),recommendUserId=angular.element(document.getElementById("weshareView")).attr("data-recommend-id"),commentOrderId=angular.element(document.getElementById("weshareView")).attr("data-comment-order-id"),replayCommentId=angular.element(document.getElementById("weshareView")).attr("data-replay-comment-id");vm.rebateLogId=rebateLogId||0,vm.recommendUserId=recommendUserId||0;var weshareId=angular.element(document.getElementById("weshareView")).attr("data-weshare-id");vm.weshare={},$scope.$watch("vm.selectShipType",function(val){-1!=val&&(vm.chooseShipType=!1)}),$scope.$watchCollection("vm.checkedOfflineStore",function(val){val&&(vm.chooseOfflineStoreError=!1)});var shareDetailUrl="/weshares/detail/"+weshareId+".json?comment_order_id="+commentOrderId+"&reply_comment_id="+replayCommentId;$http({method:"GET",url:shareDetailUrl,params:{comment_order_id:commentOrderId,reply_comment_id:replayCommentId},cache:$templateCache}).success(function(data,status){handleShareData(data)}).error(function(data,status){$log.log(data),$rootScope.loadingPage=!1}),vm.checkHasUnRead()}function sortOrders(){vm.isCreator()||(vm.ordersDetail.orders=_.sortBy(vm.ordersDetail.orders,function(order){return 9==order.status&&order.creator==vm.currentUser.id?(vm.currentUserOrderCount=vm.currentUserOrderCount+1,-2147483646):order.creator==vm.currentUser.id?(vm.currentUserOrderCount=vm.currentUserOrderCount+1,-2147483647):order.id}))}function isProxy(){return!_.isEmpty(vm.currentUser)&&1==vm.currentUser.is_proxy}function isCreator(){return!_.isEmpty(vm.currentUser)&&vm.currentUser.id==vm.weshare.creator.id}function isShareManager(){return vm.isCreator()||vm.canManageShare}function isOwner(order){return!_.isEmpty(vm.currentUser)&&!_.isEmpty(order)&&vm.currentUser.id==order.creator}function isOrderReceived(order){return!_.isEmpty(order)&&3==order.status}function getOrderDisplayName(orderId){var carts=[];return carts=vm.ordersDetail&&vm.ordersDetail.order_cart_map&&vm.ordersDetail.order_cart_map[orderId]?vm.ordersDetail.order_cart_map[orderId]:vm.shareOrder.order_cart_map[orderId],_.map(carts,function(cart){return cart.name+"X"+cart.num}).join(", ")}function redirectFaq(){vm.isCreator()||vm.canManageShare?window.location.href="/share_faq/faq_list/"+vm.weshare.id+"/"+vm.weshare.creator.id:window.location.href="/share_faq/faq/"+vm.weshare.id+"/"+vm.weshare.creator.id}function showShareDetail(){vm.showOfflineStoreDetailView=!1,vm.chooseOfflineStoreView=!1,vm.showBalanceView=!1,vm.showEditConsigneeView=!1,vm.showShareDetailView=!0}function toShareDetailView($share_id){window.location.href="/weshares/view/"+$share_id}function toUserShareInfo($uid){window.location.href="/weshares/user_share_info/"+$uid}function viewImage(url){wx.previewImage({current:url,urls:vm.weshare.images})}function getConsigneeInfo(order){return _.isEmpty(order)?"":_.reject([order.consignee_name,order.consignee_mobilephone],function(e){return _.isEmpty(e)}).join(",")}function calProxyRebateFee(totalPrice){
vm.currentUser&&0!=vm.currentUser.is_proxy&&(!vm.weshare.proxy_rebate_percent||vm.weshare.proxy_rebate_percent.percent<=0||(vm.rebateFee=(totalPrice*vm.weshare.proxy_rebate_percent.percent/100).toFixed(2)))}function calOrderTotalPrice(){var submit_products=[];_.each(vm.weshare.products,function(product){product.num&&product.num>0&&submit_products.push(product)});var totalPrice=0;_.each(submit_products,function(product){totalPrice+=product.price*product.num}),0!=totalPrice?(vm.productTotalPrice=totalPrice/100,calProxyRebateFee(totalPrice/100),vm.userCouponReduce&&(totalPrice-=vm.userCouponReduce),vm.shipFee=parseInt(getShipFee()),vm.shipSetId=getShipSetId(),totalPrice+=vm.shipFee,vm.orderPayTotalPrice=totalPrice/100,vm.rebateFee>0&&(vm.orderPayTotalPrice-=vm.rebateFee)):(vm.productTotalPrice=0,vm.orderPayTotalPrice=0,vm.rebateFee=0,vm.shipFee=0)}function getOrderComment(order_id){return vm.commentData.order_comments&&vm.commentData.order_comments[order_id]?vm.commentData.order_comments[order_id]:vm.shareOrder.orderComments?vm.shareOrder.orderComments[order_id]:null}function getOrderCommentLength(){var orderCommentCount=0;return vm.sharerAllComments&&(orderCommentCount+=Object.keys(vm.sharerAllComments).length),vm.shareOrder&&vm.shareOrder.orderComments&&(orderCommentCount+=Object.keys(vm.shareOrder.orderComments).length),orderCommentCount}function getReplyComments(comment_id){return vm.commentData.comment_replies&&vm.commentData.comment_replies[comment_id]?vm.commentData.comment_replies[comment_id]:vm.shareOrder&&vm.shareOrder.orderCommentReplies?vm.shareOrder.orderCommentReplies[comment_id]:void 0}function showReplies(comment_id){if(!vm.commentData&&!vm.shareOrder.orderCommentReplies)return!1;var selfAllReplies=vm.commentData.comment_replies;if(selfAllReplies&&selfAllReplies[comment_id])return!0;var referAllReplies=vm.shareOrder.orderCommentReplies;return!(!referAllReplies||!referAllReplies[comment_id])}function getShipSetId(){return 0==vm.selectShipType?vm.weshareSettings.kuai_di.id:1==vm.selectShipType?vm.weshareSettings.self_ziti.id:2==vm.selectShipType?vm.weshareSettings.pys_ziti.id:void 0}function setShipFee(){vm.shipFee=getShipFee()}function getShipFee(){if(0==vm.selectShipType){var goodNum=0,goodWeight=0;return _.each(vm.weshare.products,function(product){product.num&&product.num>0&&(goodNum+=parseInt(product.num),product.weight&&product.weight>0&&(goodWeight+=parseInt(product.weight)*parseInt(product.num)))}),vm.expressShipInfo?vm.calculateShipFee(vm.dliveryTemplate,vm.expressShipInfo.province_id,goodNum,goodWeight):0}return 1==vm.selectShipType?vm.weshareSettings.self_ziti.ship_fee:2==vm.selectShipType?vm.weshareSettings.pys_ziti.ship_fee:void 0}function increaseProductNum(product){Utils.isNumber(product.num)||(product.num=0),product.limit>0&&product.num==product.limit?alert("亲，最多可购"+product.limit+"份."):product.store>0?product.num=Math.min(product.num+1,vm.getProductLeftNum(product)):product.num=product.num+1,vm.showBalanceView&&calOrderTotalPrice()}function decreaseProductNum(product){Utils.isNumber(product.num)||(product.num=0);var minNum=0;if(vm.showBalanceView){var others=_.reject(vm.weshare.products,function(p){return p.id==product.id});_.all(others,function(p){return p.num<=0})&&(minNum=1)}product.num=Math.max(minNum,product.num-1),vm.showBalanceView&&calOrderTotalPrice()}function validateMobile(){return vm.buyerMobilePhoneHasError=!Utils.isMobileValid(vm.buyerMobilePhone),vm.buyerMobilePhoneHasError}function validateUserName(){return vm.usernameHasError=_.isEmpty(vm.buyerName),vm.usernameHasError}function validateShipInfo(){return 0!=vm.selectShipType||vm.expressShipInfo?1==vm.selectShipType&&-1==vm.selectedPickUpAddressId?(alert("请选择自提地址"),!1):2!=vm.selectShipType||vm.checkedOfflineStore?_.isEmpty(vm.buyerAddress)?(alert("请填写地址信息"),!1):1!=vm.selectShipType&&2!=vm.selectShipType||!_.isEmpty(vm.buyerPatchAddress)?!0:(alert("请填写详细地址信息"),!1):(alert("请选择好邻居线下店"),!1):(alert("快递地址选择有误"),!1)}function validateProducts(){return _.all(vm.weshare.products,function(product){return!product.num||product.num<=0})}function getProductLeftNum(product){if(vm.productSummery&&vm.productSummery.details[product.id]){var product_buy_num=parseInt(vm.productSummery.details[product.id].num),store_num=product.store;return store_num-product_buy_num}return product.store}function checkProductNum(product){var store_num=product.store;if(-1==store_num)return!1;if(0==store_num)return!0;if(vm.productSummery&&vm.productSummery.details[product.id]&&store_num>0){var product_buy_num=parseInt(vm.productSummery.details[product.id].num);return store_num>product_buy_num}return!0}function buyProducts(){if(vm.validateProducts()){alert("请选择报名商品！");var element=angular.element(document.getElementById("share-product-list"));return window.scrollTo(0,element[0].offsetTop-100),!1}vm.showShareDetailView=!1,vm.chooseShipType=!1,vm.showBalanceView=!0,vm.shouldInitUserConsigneeData=!0,vm.showEditConsigneeView=!0,vm.reloadConsigneeData=!0}function getBuyShipInfo(){vm.shipFee=vm.shipFee||0;var ship_info={ship_type:vm.selectShipType,ship_fee:vm.shipFee,ship_set_id:vm.shipSetId,name:vm.buyerName,mobilephone:vm.buyerMobilePhone,address:vm.buyerAddress,patchAddress:vm.buyerPatchAddress};return 0==vm.selectShipType&&(ship_info.consignee_id=vm.expressShipInfo.id,ship_info.provinceId=vm.expressShipInfo.province_id),1!=vm.selectShipType&&2!=vm.selectShipType||(1==vm.selectShipType&&(ship_info.consignee_id=vm.selectedPickUpAddressId),2==vm.selectShipType&&(ship_info.consignee_id=vm.checkedOfflineStore.id)),ship_info}function submitOrder(paymentType){if(!vm.validateOrderData())return!1;var submit_products=[];_.each(vm.weshare.products,function(product){product.num&&product.num>0&&submit_products.push(product)}),submit_products=_.map(submit_products,function(product){return{id:product.id,num:product.num}});var ship_info=getBuyShipInfo(),orderData={weshare_id:vm.weshare.id,rebate_log_id:vm.rebateLogId,products:submit_products,ship_info:ship_info,remark:vm.buyerRemark};vm.useCouponId&&(orderData.coupon_id=vm.useCouponId),vm.submitProcessing||(vm.submitProcessing=!0,$http.post("/weshares/makeOrder",orderData).success(function(data){data.success?window.location.href="/weshares/pay/"+data.orderId+"/"+paymentType:(vm.submitProcessing=!1,vm.showBuyingDialog=!1,vm.showLayer=!1,data.reason?alert(data.reason):alert("提交失败.请联系客服.."))}).error(function(){vm.submitProcessing=!1}))}function cloneShare(){vm.cloneShareProcessing||(vm.cloneShareProcessing=!0,$http.post("/weshares/cloneShare/"+vm.weshare.id).success(function(data){data.success?window.location.href="/weshares/view/"+data.shareId:(vm.cloneShareProcessing=!1,data.reason?alert(data.reason):alert("提交失败"))}).error(function(){vm.cloneShareProcessing=!1}))}function notifyUserToComment(order){vm.submitTempCommentData.order_id=order.id,vm.submitTempCommentData.reply_comment_id=0,vm.submitTempCommentData.share_id=order.member_id,vm.submitComment(),order.notify=!0}function submitComment(){$http.post("/weshares/comment",vm.submitTempCommentData).success(function(data){if(data.success){if("notify"==data.type)return $window.alert("已经通知TA"),!0;var order_id=data.order_id;vm.reloadCommentData(),vm.commentOrder.id==order_id&&3==vm.commentOrder.status&&(vm.commentOrder.status=9)}else alert("提交失败")}).error(function(){alert("提交失败")}),vm.closeCommentDialog()}function resetNotifyContent(){0==vm.sendNotifyType?vm.notify.content=vm.defaultNotifyHasBuyMsgContent():vm.notify.content=""}function defaultNotifyHasBuyMsgContent(){var msgContent="";if(vm.totalBuyCount>10){var index=0;for(var userId in vm.shareOrder.users){var user=vm.shareOrder.users[userId];if(index++,index>10)break;10==index?msgContent+=user.nickname:msgContent=msgContent+user.nickname+"，"}msgContent=msgContent+"...等"+vm.totalBuyCount+"人都已经报名"+vm.weshare.creator.nickname+"分享的"+vm.weshare.title+"啦，就差你啦。"}else msgContent=_.reduce(vm.shareOrder.users,function(memo,user){return memo+user.nickname+"，"},""),msgContent=msgContent+"都已经报名"+vm.weshare.creator.nickname+"分享的"+vm.weshare.title+"啦，就差你啦。";return msgContent}function notifyFans(){vm.showNotifyView=!0,vm.showLayer=!0,vm.sendNotifyType=0,vm.notify={},vm.notify.type=vm.sendNotifyType,vm.notify.content=vm.defaultNotifyHasBuyMsgContent()}function notifyType(){return vm.shareOrder&&vm.shareOrder.orders&&vm.shareOrder.orders.length>0?1:0}function sendNewShareMsg(){confirm("是否要发送消息，发送次数过多会对用户形成骚扰?")&&$http({method:"GET",url:"/weshares/send_new_share_msg/"+vm.weshare.id}).success(function(data){if(data.success){var msg="发送成功";data.msg&&(msg=data.msg),alert(msg)}else"user_bad"==data.reason&&alert("发送失败，你已经被封号，请联系管理员.."),data.msg&&alert(data.msg)}).error(function(){alert("发送失败,请联系朋友说客服。。")})}function unSubSharer(){vm.hasProcessSubSharer||$http({method:"GET",url:"/weshares/unsubscribe_sharer/"+vm.weshare.creator.id+"/"+vm.currentUser.id}).success(function(data){vm.hasProcessSubSharer=!1,data.success&&(vm.userSubStatus=!vm.userSubStatus,vm.showUnSubscribeLayer=!0,$timeout(function(){vm.showUnSubscribeLayer=!1},2e3))}).error(function(data){vm.hasProcessSubSharer=!0})}function subSharer(){vm.hasProcessSubSharer||$http({method:"GET",url:"/weshares/subscribe_sharer/"+vm.weshare.creator.id+"/"+vm.currentUser.id+"/1/"+vm.weshare.id+".json"}).success(function(data){vm.hasProcessSubSharer=!1,data.success?vm.userSubStatus=!vm.userSubStatus:(alert("请先关注朋友说微信公众号！"),window.location.href="https://mp.weixin.qq.com/s?__biz=MjM5MjY5ODAyOA==&mid=403992659&idx=1&sn=714a1a5f0bb4940f895e60f2f3995544")}).error(function(){vm.hasProcessSubSharer=!1})}function validNotifyMsgContent(){return _.isEmpty(vm.notify.content)?void(vm.notifyMsgHasError=!0):void(vm.notifyMsgHasError=!1)}function sendNotifyShareMsg(){return _.isEmpty(vm.notify.content)?void(vm.notifyMsgHasError=!0):(vm.notifyMsgHasError=!1,void(confirm("是否要发送消息，发送次数过多会对用户形成骚扰?")&&$http({method:"POST",url:"/weshares/send_buy_percent_msg/"+vm.weshare.id,data:{content:vm.notify.content,type:vm.sendNotifyType}}).success(function(data){data.success&&(vm.showNotifyView=!1,vm.showLayer=!1),data.msg&&alert(data.msg)}).error(function(){alert("发送失败,请联系朋友说客服。。")})))}function showCommentListDialog(){vm.loadSharerAllComments(vm.weshare.creator.id),vm.showCommentListDialogView=!0,vm.showLayer=!0}function closeCommentDialog(){vm.showCommentingDialog=!1,vm.showLayer=!1,vm.submitTempCommentData={}}function showAutoCommentDialog(){var order=vm.autoPopCommentData.comment_order_info;if(order){vm.showCommentingDialog=!0,vm.showLayer=!0;var reply_comment_id=0,comment_tip_info="",comment=vm.autoPopCommentData.comment_info;if(comment){reply_comment_id=comment.id||0;var reply_username=comment.username;comment_tip_info=reply_username==vm.currentUser.nickname?"爱心评价":"回复"+reply_username+"："}else if(vm.currentUser.id==vm.weshare.creator.id){var order_username=order.creator_nickname;comment_tip_info="回复"+order_username+"说："}else comment_tip_info="回复"+vm.weshare.creator.nickname+"说：";vm.submitTempCommentData={},vm.commentTipInfo=comment_tip_info,vm.commentOrder=order,vm.submitTempCommentData.order_id=order.id,vm.submitTempCommentData.reply_comment_id=reply_comment_id,vm.submitTempCommentData.share_id=vm.weshare.id}}function showCommentDialog(order,comment){if(vm.currentUser.id!=order.creator&&!vm.isCreator())return!1;vm.showCommentingDialog=!0,vm.showLayer=!0;var reply_comment_id=0,comment_tip_info="";if(comment){reply_comment_id=comment.id||0;var reply_username=comment.username;comment.plain_username&&(reply_username=comment.plain_username),comment_tip_info=reply_username==vm.currentUser.nickname?"爱心评价":"回复"+reply_username+"："}else if(vm.currentUser.id==vm.weshare.creator.id){var order_username;order_username=vm.ordersDetail.users[order.creator]?vm.ordersDetail.users[order.creator].nickname:vm.shareOrder.users[order.creator].nickname,comment_tip_info="回复"+order_username+"说："}else comment_tip_info="回复"+vm.weshare.creator.nickname+"说：";vm.submitTempCommentData={},vm.commentTipInfo=comment_tip_info,vm.commentOrder=order,vm.submitTempCommentData.order_id=order.id,vm.submitTempCommentData.reply_comment_id=reply_comment_id,vm.submitTempCommentData.share_id=order.member_id}function getStatusName(status,orderType){return 1==status?"待发货":2==status?"kuai_di"==orderType?"待签收":"待取货":3==status?"待评价":"已完成"}function updateBuyerData(type){function setBuyerData(data){vm.buyerName=data.name,vm.buyerMobilePhone=data.mobilephone,vm.buyerPatchAddress=data.remark_address,vm.buyerAddress=data.address}function cleanBuyerData(){vm.buyerName="",vm.buyerMobilePhone="",vm.buyerPatchAddress="",vm.buyerAddress=""}cleanBuyerData(),0==type&&vm.expressShipInfo&&setBuyerData(vm.expressShipInfo),1==type&&vm.pickUpShipInfo&&setBuyerData(vm.pickUpShipInfo),2==type&&vm.offlineStoreShipInfo&&setBuyerData(vm.offlineStoreShipInfo),calOrderTotalPrice()}function validateOrderData(){function setUserAddress(){if(0==vm.selectShipType&&vm.expressShipInfo&&(vm.buyerAddress=vm.expressShipInfo.address),1==vm.selectShipType&&-1!=vm.selectedPickUpAddressId){var selectAddress=_.filter(vm.weshare.addresses,function(item){return item.id=vm.selectedPickUpAddressId});vm.buyerAddress=selectAddress[0].address}2==vm.selectShipType&&vm.checkedOfflineStore&&(vm.buyerAddress=vm.checkedOfflineStore.name)}setUserAddress();var productsHasError=vm.validateProducts();return productsHasError?void alert("请输入商品数量"):-1==vm.selectShipType?(alert("请选择快递方式"),vm.chooseShipType=!0,!1):2!=vm.selectShipType||vm.checkedOfflineStore?(vm.validateUserName(),vm.validateMobile(),vm.buyerMobilePhoneHasError||vm.usernameHasError?(alert("报名用户信息有误"),!1):!!vm.validateShipInfo()):(alert("请选择自提点"),vm.chooseOfflineStoreError=!0,!1)}function confirmReceived(order){_.isEmpty(order)||vm.isOrderReceived(order)||$http.post("/weshares/confirmReceived/"+order.id).success(function(data){data.success&&(order.status=3)}).error(function(e){$log.log(e)})}function stopShare(){var confirmResult=window.confirm("是否截止分享?");return confirmResult?void $http.post("/weshares/stopShare/"+vm.weshare.id).success(function(data){data.success&&(vm.weshare.status=1)}).error(function(e){$log.log(e)}):!1}function createMyShare(){var wx_article="http://mp.weixin.qq.com/s?__biz=MjM5MjY5ODAyOA==&mid=209712305&idx=1&sn=ddb8431d97100d7e6305c2bc46d9ae75#rd";vm.currentUser.mobilephone&&vm.currentUser.payment?window.location.href="/weshares/add?from=share_view":window.location.href=wx_article}function toShareOrderList(){window.location.href="/weshares/share_order_list/"+vm.weshare.id}function toUpdate(){window.location.href="/weshares/update/"+vm.weshare.id}function getShipCode(order){var shipMark=order.ship_mark,code=order.ship_code;if("kuai_di"==shipMark){var ship_type_name=order.ship_type_name;if(!ship_type_name){var ship_company=order.ship_type;ship_type_name=vm.shipTypes[ship_company]}return ship_type_name+": "+code}return"pys_ziti"==shipMark?"提货码: "+code:""}function closeRecommendDialog(){vm.showShareDialog=!0,vm.showRecommendDialog=!1}function submitRecommend(){return vm.validRecommendContent()?!1:($http.post("/weshares/recommend",vm.submitRecommendData).success(function(data){data.msg&&alert(data.msg)}).error(function(e){$log.log(e)}),void vm.closeRecommendDialog())}function validRecommendContent(){return vm.recommendContentHasError=!1,_.isEmpty(vm.submitRecommendData.recommend_content)&&(vm.recommendContentHasError=!0),vm.recommendContentHasError}function checkHasUnRead(){$http.get("/share_opt/check_opt_has_new.json").success(function(data){data.has_new&&(vm.showUnReadMark=!0)})}function isShowShipCode(order){if(("kuai_di"==order.ship_mark||"pys_ziti"==order.ship_mark)&&1!=order.status&&vm.isOwner(order)){var code=order.ship_code;if(code)return!0}return!1}function isShowExpressInfoBtn(order){return!!("kuai_di"==order.ship_mark&&order.status>1&&vm.isOwner(order))}function showOrderExpressInfo(order){window.location.href="/weshares/express_info/"+order.id}function calculateShipFee(deliveryTemplate,provinceId,goodNum,goodWeight){var shipFee=0;if(provinceId&&goodNum>0){var template=null;if(deliveryTemplate.delivery_templates&&deliveryTemplate.delivery_templates.length>0)for(var i=0;i<deliveryTemplate.delivery_templates.length;i++){var deliveryTemplateItem=deliveryTemplate.delivery_templates[i],regions=deliveryTemplateItem.regions;if(regions&&regions.length>0){for(var j=0;j<regions.length;j++){var region=regions[j];region.province_id==provinceId&&(template=deliveryTemplateItem);break}if(template)break}}template||(template=deliveryTemplate.default_delivery_template);var startUnits=parseInt(template.start_units),startFee=parseInt(template.start_fee),addUnits=parseInt(template.add_units),addFee=parseInt(template.add_fee),unitType=parseInt(template.unit_type),cal_val=goodNum;1==unitType&&(cal_val=goodWeight);var gapVal=cal_val-startUnits;shipFee=0>=gapVal?startFee:startFee+Math.ceil(gapVal/addUnits)*addFee}return shipFee}function handleShareData(data){$rootScope.loadingPage=!1,vm.weshare=data.weshare,vm.weshare.addresses&&1==vm.weshare.addresses.length?vm.selectedPickUpAddressId=vm.weshare.addresses[0].id:vm.weshare.addresses&&vm.weshare.addresses.length>1&&(vm.weshare.addresses.unshift({id:-1,address:"请选择收货地址"}),vm.selectedPickUpAddressId=-1),vm.isManage=data.is_manage,vm.canManageShare=data.can_manage_share,vm.canEditShare=data.can_edit_share,vm.recommendData=data.recommendData,vm.currentUser=data.current_user||{},vm.weixinInfo=data.weixininfo,vm.consignee=data.consignee,vm.myCoupons=data.my_coupons,vm.weshareSettings=data.weshare_ship_settings,vm.userSubStatus=data.sub_status,vm.autoPopCommentData=data.prepare_comment_data,vm.dliveryTemplate=data.weshare.deliveryTemplate,vm.productSummery=data.share_summery,vm.submitRecommendData={},vm.submitRecommendData.recommend_content=vm.weshare.creator.nickname+"我认识，很靠谱！",vm.submitRecommendData.recommend_user=vm.currentUser.id,vm.submitRecommendData.recommend_share=vm.weshare.id,vm.myCoupons&&(vm.useCouponId=vm.myCoupons.CouponItem.id,vm.userCouponReduce=vm.myCoupons.Coupon.reduced_price),vm.userShareSummery=data.user_share_summery,(vm.isCreator()||vm.canManageShare)&&(vm.faqTipText="反馈消息"),vm.getShareSummeryData(vm.weshare.id,vm.weshare.creator.id),vm.loadOrderDetail(vm.weshare.id)}function setWeiXinShareParams(){var url="http://www.tongshijia.com/weshares/view/"+vm.weshare.id,to_timeline_title="朋友说—基于信任关系的分享平台",to_friend_title="朋友说—基于信任关系的分享平台",imgUrl="http://static.tongshijia.com/static/weshares/images/pys-logo.gif",desc="来 [朋友说] 分享好吃的、好玩的、有趣的",share_string="we_share",userInfo=vm.currentUser,regex=/(<([^>]+)>)/gi,descText=vm.weshare.description,shareIntryResult=descText.replace(regex,"").substr(0,30);if(vm.currentUser.id==vm.weshare.creator.id?(to_timeline_title=vm.weshare.creator.nickname+"分享:"+vm.weshare.title,to_friend_title=vm.weshare.creator.nickname+"分享:"+vm.weshare.title,imgUrl=vm.weshare.images[0]||vm.weshare.creator.image,vm.totalBuyCount>=5&&(desc+="已经有"+vm.totalBuyCount+"人报名，"),desc+=shareIntryResult):userInfo&&_.isEmpty(vm.ordersDetail.orders)?(vm.isProxy()&&(url=url+"?recommend="+vm.currentUser.id),vm.isProxy()||0==vm.recommendUserId||(url=url+"?recommend="+vm.recommendUserId),to_timeline_title=userInfo.nickname+"报名了"+vm.weshare.creator.nickname+"分享的"+vm.weshare.title,to_friend_title=userInfo.nickname+"报名了"+vm.weshare.creator.nickname+"分享的"+vm.weshare.title,imgUrl=vm.weshare.images[0]||userInfo.image,desc=vm.weshare.creator.nickname+"我认识，很靠谱。"+shareIntryResult):vm.currentUser?(4!==vm.weshare.type&&(vm.isProxy()&&(url=url+"?recommend="+vm.currentUser.id),vm.isProxy()||0==vm.recommendUserId||(url=url+"?recommend="+vm.recommendUserId)),to_timeline_title=vm.currentUser.nickname+"推荐"+vm.weshare.creator.nickname+"分享的"+vm.weshare.title,to_friend_title=vm.currentUser.nickname+"推荐"+vm.weshare.creator.nickname+"分享的"+vm.weshare.title,imgUrl=vm.weshare.images[0]||vm.currentUser.image,desc=vm.weshare.creator.nickname+"我认识，很靠谱。"+shareIntryResult):(to_timeline_title=vm.weshare.creator.nickname+"分享了"+vm.weshare.title,to_friend_title=vm.weshare.creator.nickname+"分享了"+vm.weshare.title,imgUrl=vm.weshare.images[0]||vm.weshare.creator.image,desc=vm.weshare.creator.nickname+"我认识，很靠谱。"+shareIntryResult),vm.weixinInfo&&(share_string=vm.weixinInfo.share_string),vm.isSharePacket&&userInfo){url="http://www.tongshijia.com/weshares/view/"+vm.weshare.id,imgUrl="http://static.tongshijia.com/static/weshares/images/share_icon.jpg";var title=userInfo.nickname+"报名了"+vm.weshare.creator.nickname+"分享的"+vm.weshare.title;to_timeline_title=title,to_friend_title=title,url=url+"?shared_offer_id="+vm.sharedOfferId,vm.isProxy()&&(url=url+"&recommend="+vm.currentUser.id),vm.isProxy()||0==vm.recommendUserId||(url=url+"&recommend="+vm.recommendUserId),desc=vm.weshare.creator.nickname+"我认识，很靠谱！送你一个爱心礼包，一起来参加。"}var to_friend_link=url,to_timeline_link=url;wx&&wx.ready(function(){wx.onMenuShareAppMessage({title:to_friend_title,desc:desc,link:to_friend_link,imgUrl:imgUrl,success:function(){"0"!=share_string&&setTimeout(function(){$http.post("/wx_shares/log_share",{trstr:share_string,share_type:"appMsg"}).success(function(data,status,headers,config){}).error(function(data,status,headers,config){})},500)}}),wx.onMenuShareTimeline({title:to_timeline_title,link:to_timeline_link,imgUrl:imgUrl,success:function(){"0"!=share_string&&setTimeout(function(){$http.post("/wx_shares/log_share",{trstr:share_string,share_type:"timeline"}).success(function(data,status,headers,config){}).error(function(data,status,headers,config){})},500)}})})}var vm=this;vm.staticFilePath=staticFilePath,vm.showShareDetailView=!0,vm.faqTipText="私信",vm.showUnReadMark=!1,vm.readMoreBtnText="全文",vm.hideMoreShareInfo=!1,vm.shouldShowReadMoreBtn=!1,OfflineStore.ChooseOfflineStore(vm),vm.statusMap={0:"进行中",1:"已截止"},vm.shipTypes=shipTypes,vm.commentData={},vm.submitTempCommentData={},vm.viewImage=viewImage,vm.increaseProductNum=increaseProductNum,vm.decreaseProductNum=decreaseProductNum,vm.getOrderDisplayName=getOrderDisplayName,vm.isCreator=isCreator,vm.isProxy=isProxy,vm.isOwner=isOwner,vm.isOrderReceived=isOrderReceived,vm.getConsigneeInfo=getConsigneeInfo,vm.validateProducts=validateProducts,vm.buyProducts=buyProducts,vm.validateMobile=validateMobile,vm.validateUserName=validateUserName,vm.validateShipInfo=validateShipInfo,vm.validateOrderData=validateOrderData,vm.submitOrder=submitOrder,vm.confirmReceived=confirmReceived,vm.toUserShareInfo=toUserShareInfo,vm.toShareDetailView=toShareDetailView,vm.checkProductNum=checkProductNum,vm.getProductLeftNum=getProductLeftNum,vm.toShareOrderList=toShareOrderList,vm.createMyShare=createMyShare,vm.toUpdate=toUpdate,vm.stopShare=stopShare,vm.showShareDetail=showShareDetail,vm.calOrderTotalPrice=calOrderTotalPrice,vm.getStatusName=getStatusName,vm.getShipCode=getShipCode,vm.isShowShipCode=isShowShipCode,vm.showCommentDialog=showCommentDialog,vm.showAutoCommentDialog=showAutoCommentDialog,vm.submitComment=submitComment,vm.getOrderComment=getOrderComment,vm.getReplyComments=getReplyComments,vm.showReplies=showReplies,vm.showCommentListDialog=showCommentListDialog,vm.getOrderCommentLength=getOrderCommentLength,vm.initWeshareData=initWeshareData,vm.sortOrders=sortOrders,vm.closeCommentDialog=closeCommentDialog,vm.notifyUserToComment=notifyUserToComment,vm.loadOrderDetail=loadOrderDetail,vm.getFormatDate=getFormatDate,vm.notifyFans=notifyFans,vm.notifyType=notifyType,vm.sendNewShareMsg=sendNewShareMsg,vm.sendNotifyShareMsg=sendNotifyShareMsg,vm.validNotifyMsgContent=validNotifyMsgContent,vm.subSharer=subSharer,vm.cloneShare=cloneShare,vm.resetNotifyContent=resetNotifyContent,vm.defaultNotifyHasBuyMsgContent=defaultNotifyHasBuyMsgContent,vm.closeRecommendDialog=closeRecommendDialog,vm.submitRecommend=submitRecommend,vm.validRecommendContent=validRecommendContent,vm.checkHasUnRead=checkHasUnRead,vm.setShipFee=setShipFee,vm.redirectFaq=redirectFaq,vm.chatToUser=chatToUser,vm.calProxyRebateFee=calProxyRebateFee,vm.isShareManager=isShareManager,vm.calculateShipFee=calculateShipFee,vm.unSubSharer=unSubSharer,vm.updateBuyerData=updateBuyerData,vm.getShareSummeryData=getShareSummeryData,vm.filterProductByNum=filterProductByNum,vm.currentUserOrderCount=0,vm.totalBuyCount=0,vm.rebateFee=0,vm.orderPayTotalPrice=0,vm.productTotalPrice=0,vm.isShowExpressInfoBtn=isShowExpressInfoBtn,vm.showOrderExpressInfo=showOrderExpressInfo,vm.commentData=[],vm.orderComments=[],activate()}angular.module("weshares").controller("WesharesViewCtrl",WesharesViewCtrl)}(window,window.angular),function(window,angular){angular.module("weshares").factory("PoolProductInfo",function($http,$log,$templateCache){return{prepareProductInfo:function(weshareId,callBackFunc){$http({method:"GET",url:"/share_product_pool/get_share_product_detail/"+weshareId+".json",cache:$templateCache}).success(function(data){callBackFunc(data)}).error(function(){$log.log("get share product info error"),$rootScope.loadingPage=!1})}}})}(window,window.angular),function(window,angular){function ShareProductViewCtrl($scope,$rootScope,$log,$http,$templateCache,$timeout,$filter,$window,Utils,staticFilePath,PoolProductInfo){function activate(){vm.initProductInfo()}function initProductInfo(){var weshareId=angular.element(document.getElementById("shareProductView")).attr("data-weshare-id");vm.shareId=weshareId,vm.weshare={},PoolProductInfo.prepareProductInfo(weshareId,function(data){vm.weshare=data,vm.initViewFieldName(),vm.initProductBuyBtn(),$rootScope.loadingPage=!1})}function initProductBuyBtn(){if(vm.weshare.buy_config){var buyConfig=vm.weshare.buy_config;buyConfig["try"]&&(vm.buyShareId=buyConfig["try"],vm.buyButtonText="试吃申请"),buyConfig.buy&&(vm.buyShareId=buyConfig.buy,vm.buyButtonText="渠道价购买")}}function toBuyShare(){vm.buyShareId?window.location.href="/weshares/view/"+vm.buyShareId:alert("该商品没有试吃！请联系客服。")}function toggleTag(tag){var currentToggleState=vm.toggleState[tag];currentToggleState.open=!currentToggleState.open,currentToggleState.statusText=currentToggleState.open?"收起":"展开"}function cloneShare(){vm.cloneShareProcessing||(vm.cloneShareProcessing=!0,$http({method:"GET",url:"/share_product_pool/clone_share/"+vm.shareId}).success(function(data){if(data.success){var newShareId=data.shareId;window.location.href="/weshares/view/"+newShareId}else data.reason?data[!1]?(alert("您还没有登录，请登录后进行操作。"),window.location.href="/users/login"):alert(data.reason):alert("开团失败，请联系管理员");vm.cloneShareProcessing=!1}).error(function(){$log.log("clone share from product pool error"),alert("系统错误，请联系管理员"),vm.cloneShareProcessing=!1}))}function viewImage(url){wx.previewImage({current:url,urls:vm.weshare.images})}function initViewFieldName(){vm.shareStatusText=2==vm.weshare.status?"无效":"可用",vm.toggleState={0:{open:!0,statusText:"收起"}},_.each(vm.weshare.tags,function(value,key){vm.toggleState[key]={open:!0,statusText:"收起"}})}var vm=this;vm.showDetailView=!0,vm.initProductInfo=initProductInfo,vm.initViewFieldName=initViewFieldName,vm.toggleTag=toggleTag,vm.cloneShare=cloneShare,vm.viewImage=viewImage,vm.toBuyShare=toBuyShare,vm.initProductBuyBtn=initProductBuyBtn,vm.staticFilePath=staticFilePath,activate()}angular.module("weshares").controller("ShareProductViewCtrl",ShareProductViewCtrl)}(window,window.angular);