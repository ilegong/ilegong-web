!function(window,angular){function UserListCtrl($http,$log,$templateCache,$rootScope){function active(){vm.type=angular.element(document.getElementById("userListView")).attr("data-type"),vm.self.total=angular.element(document.getElementById("userListView")).attr("data-total_self"),vm.comm.total=angular.element(document.getElementById("userListView")).attr("data-total_comm"),$rootScope.uid=angular.element(document.getElementById("userListView")).attr("data-user_id"),vm.total=vm.self.total,$rootScope.loadingPage=!1,$http.get("/users/get_id_and_proxies").success(function(data){null!=data.uid&&($rootScope.uid=data.uid,$rootScope.proxies=_.map(data.proxies,function(pid){return parseInt(pid)}))}).error(function(data,e){$log.log("Failed to get proxies: "+e)})}function tab(type){vm.type=type,1==vm.type?vm.total=vm.self.total:(vm.total=vm.comm.total,vm.comm.over||1!=vm.comm.page||loadData())}function toggleHideShowUnSubBtn(uid){return vm.flag_show_un_sub[uid]?void(vm.flag_show_un_sub[uid]=!vm.flag_show_un_sub[uid]):void(vm.flag_show_un_sub[uid]=!0)}function viewUser(uid){window.location.href="/weshares/user_share_info/"+uid}function search(){vm.queryWord=vm.searchWord,vm.self.page=1,vm.self.users=[],vm.self.over=!1,vm.comm.page=1,vm.comm.users=[],vm.comm.over=!1,vm.loadingData=!1,loadData()}function loadData(){vm.loadingData=!0;var page=1==vm.type?vm.self.page:vm.comm.page,url="/weshares/get_fans_data/"+vm.type+"/"+page+".json?query="+vm.queryWord;$http({method:"GET",url:url,cache:$templateCache}).success(function(data){1==vm.type?0==obj_len(data)?vm.self.over=!0:(vm.self.users=vm.self.users.concat(data),vm.self.page=vm.self.page+1):0==obj_len(data)?vm.comm.over=!0:(vm.comm.users=vm.comm.users.concat(data),vm.comm.page=vm.comm.page+1),vm.loadingData=!1}).error(function(data,status){})}function obj_len(obj){var n=0;for(var i in obj)n++;return console.log(n),n}var vm=this;vm.loadData=loadData,vm.toggleHideShowUnSubBtn=toggleHideShowUnSubBtn,vm.viewUser=viewUser,vm.search=search,vm.tab=tab,$rootScope.uid=0,vm.type=1,vm.loadingData=!1,vm.self={page:1,users:[],over:!1,total:0},vm.comm={page:1,users:[],over:!1,total:0},vm.total=0,vm.processSubmit=!1,vm.queryWord="",vm.searchWord="",active()}angular.module("weshares").controller("UserListCtrl",UserListCtrl)}(window,window.angular);