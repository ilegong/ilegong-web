!function(window,angular){function ShareOptIndexController($rootScope,$http,$log,$q,staticFilePath){function activate(){vm.loadData().then(function(data){$rootScope.loadingPage=!1},function(data){$rootScope.loadingPage=!1})}function loadNextPage(){if(vm.loading||vm.shares.over)return!1;vm.loading=!0;var data={type:0,time:vm.bottomTimeStamp,limit:5};vm.loadData(data).success(function(data){vm.loading=!1}).error(function(data){vm.onLoadedError(),vm.loading=!1})}function loadData(params){var deferred=$q.defer();return $http.get("/share_opt/newfetch_opt_list_data.json",params).success(function(data){data.error&&deferred.resolve("Hello, "+name+"!");var list=data.opt_logs;_.each(list,function(optLog){vm.bottomTimeStamp=optLog.time}),$log.log(list),vm.shares=vm.shares.concat(list),deferred.resolve(vm.shares)}).error(function(){deferred.reject("Greeting "+name+" is not allowed.")}),deferred.promise}function onLoadedError(){}var vm=this;vm.staticFilePath=staticFilePath,vm.loadData=loadData,vm.loadNextPage=loadNextPage,vm.onLoadedError=onLoadedError,vm.bottomTimeStamp=0,vm.shares=[],activate()}angular.module("weshares").controller("ShareOptIndexController",ShareOptIndexController)}(window,window.angular);