!function(window,angular){function SubscriptionController($rootScope,$scope,$http,$log){function activate(){sub.showUnSubscribeBtn=!1,$scope.$on("page_clicked",function(){sub.showUnSubscribeBtn=!1})}function isSubscribed(proxyId){return _.contains($rootScope.proxies,parseInt(proxyId))}function subscribe(proxyId){return $rootScope.uid<0?void($window.location.href="/users/login"):void(sub.subscribeInProcess||(sub.subscribeInProcess=!0,$http.get("/weshares/subscribe_sharer/"+proxyId+"/"+$rootScope.uid).success(function(data){data.success&&$rootScope.proxies.push(parseInt(proxyId)),sub.subscribeInProcess=!1}).error(function(data,e){sub.subscribeInProcess=!1,$log.log("Failed to subscribe: "+e)})))}function unSubscribe(proxyId){return $rootScope.uid<0?void($window.location.href="/users/login"):void(sub.unSubscribeInProcess||(sub.unSubscribeInProcess=!0,$http.get("/weshares/unsubscribe_sharer/"+proxyId+"/"+$rootScope.uid).success(function(data){data.success&&($rootScope.proxies=_.reject($rootScope.proxies,function(proxy){return proxy==proxyId})),sub.unSubscribeInProcess=!1}).error(function(data,e){$log.log("Failed to get proxies: "+e),sub.unSubscribeInProcess=!1})))}function clickSubscribedBtn(proxyId,$event){sub.showUnSubscribeBtn=!0,$event.stopPropagation()}var sub=this;sub.isSubscribed=isSubscribed,sub.unSubscribe=unSubscribe,sub.subscribe=subscribe,sub.clickSubscribedBtn=clickSubscribedBtn,activate()}angular.module("weshares").controller("SubscriptionController",SubscriptionController)}(window,window.angular),function(window,angular){function PayResultCtr($rootScope){var vm=this;$rootScope.loadingPage=!1,$rootScope.proxies=[],vm.initProxies=function(uid){$rootScope.proxies.push(uid)},vm.initUid=function(uid){$rootScope.uid=uid}}angular.module("weshares").controller("PayResultCtr",PayResultCtr)}(window,window.angular);